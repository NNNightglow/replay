(function(){"use strict";var __webpack_modules__={2889:function(e,t,a){a.d(t,{Wp:function(){return c}});var l=a(4335),n=a(1132),s=a(163);const o=l.A.create({baseURL:"http://localhost:5000",timeout:3e4,headers:{"Content-Type":"application/json"}});let r=null;o.interceptors.request.use(e=>(e.hideLoading||(r=n.Ks.service({lock:!0,text:"æ­£åœ¨åŠ è½½æ•°æ®...",background:"rgba(0, 0, 0, 0.7)"})),console.log(`ğŸš€ APIè¯·æ±‚: ${e.method?.toUpperCase()} ${e.url}`),e),e=>(r&&r.close(),console.error("âŒ è¯·æ±‚é”™è¯¯:",e),Promise.reject(e))),o.interceptors.response.use(e=>{r&&(r.close(),r=null);const{data:t}=e;return!1===t.success?(s.nk.error(t.message||"è¯·æ±‚å¤±è´¥"),Promise.reject(new Error(t.message||"è¯·æ±‚å¤±è´¥"))):(console.log(`âœ… APIå“åº”: ${e.config.url}`,t),t)},e=>{r&&(r.close(),r=null),console.error("âŒ å“åº”é”™è¯¯:",e);let t="ç½‘ç»œè¯·æ±‚å¤±è´¥";if(e.response){const{status:a,data:l}=e.response;switch(a){case 400:t="è¯·æ±‚å‚æ•°é”™è¯¯";break;case 401:t="æœªæˆæƒè®¿é—®";break;case 403:t="ç¦æ­¢è®¿é—®";break;case 404:t="è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨";break;case 500:t="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯";break;default:t=l?.message||`è¯·æ±‚å¤±è´¥ (${a})`}}else t=e.request?"ç½‘ç»œè¿æ¥è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ":e.message||"æœªçŸ¥é”™è¯¯";return s.nk.error(t),Promise.reject(e)});class i{static formatDateForAPI(e){return e?e.includes("T")||e.includes(" ")?e.split("T")[0].split(" ")[0]:e.length>10?e.substring(0,10):e:e}static async getMarketOverview(){return o.get("/api/market/overview")}static async getMarketSentiment(e){const t=this.formatDateForAPI(e);return o.get("/api/market/sentiment",{params:{date:t}})}static async getLatestMarketDate(){return o.get("/api/market/latest-date")}static async getMarketMetadata(e){return o.get("/api/market/metadata",{params:{days_back:e}})}static async getMarketSentimentCharts(e,t=30){const a=this.formatDateForAPI(e);return o.get("/api/market/sentiment/charts",{params:{date:a,days_back:t}})}static async getIndexData(e,t=30){const a=this.formatDateForAPI(e);return o.get("/api/market/indices",{params:{date:a,days:t}})}static async getNewHighStocks(e,t,a={}){const l=this.formatDateForAPI(e);return o.post("/api/stocks/new-high",{date:l,period:t,exclude_st:a.excludeST,include_non_main_board:a.includeNonMainBoard})}static async getStockKline(e,t=30,a=null,l="data"){const n={code:e,days:t,format:l};return a&&(n.date=this.formatDateForAPI(a)),o.get("/api/stocks/kline",{params:n})}static async getHeimaAnalysis(e,t={}){const a=this.formatDateForAPI(e);return o.get("/api/analysis/heima",{params:{date:a,exclude_st:t.excludeST,include_non_main_board:t.includeNonMainBoard}})}static async getBaimaAnalysis(e,t,a={}){const l=this.formatDateForAPI(e),n=this.formatDateForAPI(t);return o.post("/api/analysis/baima",{start_date:l,end_date:n,min_market_cap:100,exclude_st:a.excludeST,include_non_main_board:a.includeNonMainBoard})}static async postBaimaAnalysis(e){return o.post("/api/analysis/baima",e)}static async getSectorData(e=null,t={}){const a={};e&&(a.date=this.formatDateForAPI(e)),void 0!==t.include_sectors&&(a.include_sectors=t.include_sectors),void 0!==t.include_concepts&&(a.include_concepts=t.include_concepts);let l="both";!0===t.include_sectors&&!1===t.include_concepts?l="sectors":!1===t.include_sectors&&!0===t.include_concepts&&(l="concepts"),a.type=l,console.log("ğŸ” æ¿å—æ•°æ®APIè°ƒç”¨å‚æ•°:",a);const n=await o.get("/api/sectors",{params:a});return console.log("ğŸ” æ¿å—æ•°æ®APIå“åº”:",n),n}static async getSectorNames(e="both"){return o.get("/api/sectors/names",{params:{type:e}})}static async getSectorKline(e){return o.post("/api/market/sectors/kline",e)}static async getSectorCustomPeriod(e){return o.post("/api/market/sectors/custom-period",e)}static async searchStocks(e){return o.get("/api/stocks/search",{params:{query:e}})}static async getStockComparison(e){return o.post("/api/stocks/comparison",e)}static async getSectorStocks(e,t={}){return o.get(`/api/sectors/${encodeURIComponent(e)}/stocks`,{params:t})}static async getSingleSectorKline(e,t={}){const{overlay_index:a,days_range:l=30,format:n="chart",date:s}=t,r={overlay_index:a,days_range:l,format:n};return s&&(r.date=this.formatDateForAPI(s)),o.get(`/api/sectors/${encodeURIComponent(e)}/kline`,{params:r})}static async getMultiIndexKline(e){const{selected_indices:t,date_str:a,days_range:l=30}=e,n=this.formatDateForAPI(a);return o.post("/api/indices/kline",{indices:t,date:n,days_range:l,format:"chart"})}static async getNonTradingDays(e,t){return o.get("/api/holidays/non-trading-days",{params:{year:e,month:t}})}static async checkDateTradingStatus(e){const t=this.formatDateForAPI(e);return o.get("/api/holidays/check-date",{params:{date:t}})}static async getNonTradingDaysRange(e,t){const a=this.formatDateForAPI(e),l=this.formatDateForAPI(t);return o.get("/api/holidays/range",{params:{start_date:a,end_date:l}})}}const c={formatDate(e,t="YYYY-MM-DD"){if(!e)return"";const a=new Date(e),l=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0");return t.replace("YYYY",l).replace("MM",n).replace("DD",s)},formatNumber(e,t=2){return null===e||void 0===e?"--":Number(e).toFixed(t)},formatAmount(e){if(null===e||void 0===e||0===e)return"--";const t=Number(e);return isNaN(t)?"--":t>=1e8?`${(t/1e8).toFixed(2)}äº¿`:t>=1e7?`${(t/1e7).toFixed(2)}åƒä¸‡`:t>=1e3?`${(t/1e4).toFixed(2)}ä¸‡`:t.toFixed(2)},formatPercent(e,t=2){if(null===e||void 0===e)return"--";const a=Number(e).toFixed(t);return`${a}%`},formatVolume(e){if(!e)return"--";const t=Number(e);return t>=1e8?`${(t/1e8).toFixed(2)}äº¿`:t>=1e4?`${(t/1e4).toFixed(2)}ä¸‡`:t.toString()},getChangeColor(e){return e>0?"#f56c6c":e<0?"#67c23a":"#909399"},getChangeIcon(e){return e>0?"ArrowUp":e<0?"ArrowDown":"Minus"}};new Map;t.Ay=i},4485:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(953),vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(641);__webpack_exports__.A={name:"EChartsRenderer",props:{chartHtml:{type:String,default:""},height:{type:String,default:"400px"}},setup(props){const chartFrame=(0,vue__WEBPACK_IMPORTED_MODULE_0__.KR)(null),directContainer=(0,vue__WEBPACK_IMPORTED_MODULE_0__.KR)(null),useDirectRender=(0,vue__WEBPACK_IMPORTED_MODULE_0__.KR)(!0),showDebug=(0,vue__WEBPACK_IMPORTED_MODULE_0__.KR)(!1),showHtmlContent=(0,vue__WEBPACK_IMPORTED_MODULE_0__.KR)(!1),processedHtml=(0,vue__WEBPACK_IMPORTED_MODULE_1__.EW)(()=>{if(!props.chartHtml)return"";let e=props.chartHtml;const t=[{old:"https://assets.pyecharts.org/assets/v5/echarts.min.js",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"},{old:"https://assets.pyecharts.org/assets/v5/",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/"},{old:"https://assets.pyecharts.org/assets/",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/"}];return t.forEach(t=>{const a=t.old.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=new RegExp(a,"g");e=e.replace(l,t.new)}),e.includes("<style>")||(e=`\n          <style>\n            body { margin: 0; padding: 0; }\n            #chart-container { width: 100%; height: 100%; }\n          </style>\n          ${e}\n        `),e}),iframeHtml=(0,vue__WEBPACK_IMPORTED_MODULE_1__.EW)(()=>{if(!props.chartHtml)return"";let e=props.chartHtml;const t=[{old:"https://assets.pyecharts.org/assets/v5/echarts.min.js",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"},{old:"https://assets.pyecharts.org/assets/v5/",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/"},{old:"https://assets.pyecharts.org/assets/",new:"https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/"}];if(t.forEach(t=>{const a=t.old.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=new RegExp(a,"g");e=e.replace(l,t.new)}),e.includes("<!DOCTYPE html>")){const t="</head>",a="<style>\n          body { margin: 0; padding: 0; width: 100%; height: 100vh; }\n          .chart-container { width: 100%; height: 100%; }\n        </' + 'style>";e=e.replace(t,a+t)}else{const t="<!DOCTYPE html>",a="<html>",l="<head>",n='<meta charset="UTF-8">',s='<meta name="viewport" content="width=device-width, initial-scale=1.0">',o="<title>ECharts</title>",r='<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"><\/script>',i="<style>",c="\n          body { \n            margin: 0; \n            padding: 0; \n            width: 100%; \n            height: 100vh; \n            display: flex; \n            align-items: center; \n            justify-content: center;\n          }\n          .chart-container { \n            width: 100%; \n            height: 100%; \n          }\n        ",d="</style>",u="</head>",p="<body>",h="</body>",g="</html>";e=[t,a,l,n,s,o,r,i,c,d,u,p,e,h,g].join("\n")}return e}),toggleRenderMode=()=>{useDirectRender.value=!useDirectRender.value,console.log("ğŸ”„ åˆ‡æ¢æ¸²æŸ“æ¨¡å¼:",useDirectRender.value?"ç›´æ¥æ¸²æŸ“":"iframeæ¸²æŸ“"),(0,vue__WEBPACK_IMPORTED_MODULE_1__.dY)(()=>{useDirectRender.value&&directContainer.value&&executeChartScripts(directContainer.value)})},onIframeLoad=()=>{if(console.log("ğŸ“Š å›¾è¡¨iframeåŠ è½½å®Œæˆ"),chartFrame.value)try{const e=chartFrame.value.contentDocument||chartFrame.value.contentWindow.document,t=e.querySelectorAll("div[id]");console.log(`ğŸ“Š iframeä¸­æ‰¾åˆ° ${t.length} ä¸ªå›¾è¡¨å®¹å™¨`),t.forEach((e,t)=>{console.log(`ğŸ“Š å›¾è¡¨å®¹å™¨ ${t+1}: ID=${e.id}, å°ºå¯¸=${e.offsetWidth}x${e.offsetHeight}`)});const a=chartFrame.value.contentWindow;a&&a.echarts?console.log("âœ… iframeä¸­EChartsåº“å·²åŠ è½½"):console.warn("âš ï¸ iframeä¸­EChartsåº“æœªæ‰¾åˆ°")}catch(e){console.warn("âš ï¸ æ— æ³•è®¿é—®iframeå†…å®¹:",e.message)}},validateJavaScript=e=>{try{return new Function(e),!0}catch(t){return console.warn("âš ï¸ JavaScriptè¯­æ³•éªŒè¯å¤±è´¥:",t.message),!1}},cleanScriptContent=e=>{let t=e.trim();return t=t.replace(/^\uFEFF/,""),t=t.replace(/\]\s*\]/g,"]"),t=t.replace(/\}\s*\}/g,"}"),t=t.replace(/\)\s*\)/g,")"),t=t.replace(/;+/g,";"),!t||t.endsWith(";")||t.endsWith("}")||t.endsWith(")")||(t+=";"),t},executeChartScripts=container=>{if(container){console.log("ğŸ“Š å¼€å§‹æ‰§è¡Œå›¾è¡¨è„šæœ¬...");try{if("undefined"===typeof window.echarts){console.warn("âš ï¸ EChartsåº“æœªåŠ è½½ï¼Œç­‰å¾…åº“åŠ è½½å®Œæˆ...");const e=document.createElement("script");return e.src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js",e.onload=()=>{console.log("âœ… EChartsåº“åŠ è½½å®Œæˆï¼Œé‡è¯•æ‰§è¡Œè„šæœ¬"),setTimeout(()=>executeChartScripts(container),100)},void document.head.appendChild(e)}const scripts=container.querySelectorAll("script");console.log(`ğŸ“ æ‰¾åˆ° ${scripts.length} ä¸ªè„šæœ¬æ ‡ç­¾`),scripts.forEach((script,index)=>{if(script.textContent&&script.textContent.trim())try{let scriptContent=script.textContent.trim();if(!scriptContent||0===scriptContent.length)return;if(console.log(`ğŸ“Š å¤„ç†è„šæœ¬ ${index+1}/${scripts.length}`),scriptContent=cleanScriptContent(scriptContent),!validateJavaScript(scriptContent))return void console.warn("âš ï¸ è·³è¿‡è¯­æ³•é”™è¯¯çš„è„šæœ¬:",scriptContent.substring(0,100)+"...");const chartIdMatch=scriptContent.match(/document\.getElementById\(['"`]([^'"`]+)['"`]\)/);if(chartIdMatch){const e=chartIdMatch[1],t=document.getElementById(e);if(!t)return void console.warn(`âš ï¸ å›¾è¡¨å®¹å™¨ä¸å­˜åœ¨: ${e}`);console.log(`âœ… æ‰¾åˆ°å›¾è¡¨å®¹å™¨: ${e}`)}eval(scriptContent),console.log(`âœ… è„šæœ¬ ${index+1} æ‰§è¡ŒæˆåŠŸ`)}catch(error){console.error(`âŒ è„šæœ¬ ${index+1} æ‰§è¡Œå¤±è´¥:`,error),console.error("âŒ é”™è¯¯è„šæœ¬å†…å®¹:",script.textContent.substring(0,200))}});const externalScripts=container.querySelectorAll("script[src]");externalScripts.forEach((e,t)=>{if(e.src)try{const a=document.createElement("script");a.src=e.src,a.id=`chart-external-script-${Date.now()}-${t}`,container.appendChild&&(container.appendChild(a),console.log("ğŸ“Š åŠ è½½å¤–éƒ¨è„šæœ¬æˆåŠŸ:",e.src))}catch(a){console.error("âŒ åŠ è½½å¤–éƒ¨è„šæœ¬å¤±è´¥:",a)}})}catch(error){console.error("âŒ æ‰§è¡Œå›¾è¡¨è„šæœ¬æ—¶å‘ç”Ÿé”™è¯¯:",error)}}else console.warn("âš ï¸ å®¹å™¨ä¸å­˜åœ¨ï¼Œæ— æ³•æ‰§è¡Œè„šæœ¬")},handleChartHtmlChange=()=>{props.chartHtml&&useDirectRender.value&&(0,vue__WEBPACK_IMPORTED_MODULE_1__.dY)(()=>{if(directContainer.value){console.log("ğŸ“Š Chart HTML changed, re-executing scripts...");const e=directContainer.value.querySelectorAll('script[id^="chart-script-"], script[id^="chart-external-script-"]');e.forEach(e=>e.remove());const t=directContainer.value.querySelectorAll("div[id]");t.forEach(e=>{const t=e.id;if(t&&window.echarts){const a=window.echarts.getInstanceByDom(e);a&&(a.dispose(),console.log(`ğŸ—‘ï¸ å·²é”€æ¯å›¾è¡¨å®ä¾‹: ${t}`))}}),setTimeout(()=>{executeChartScripts(directContainer.value)},100)}})};return(0,vue__WEBPACK_IMPORTED_MODULE_1__.sV)(()=>{console.log("ğŸ“Š EChartsRenderer mounted, chartHtml length:",props.chartHtml?.length||0),props.chartHtml&&useDirectRender.value&&(console.log("ğŸ“Š Executing initial scripts on mount..."),(0,vue__WEBPACK_IMPORTED_MODULE_1__.dY)(()=>{directContainer.value&&setTimeout(()=>{executeChartScripts(directContainer.value)},200)}))}),(0,vue__WEBPACK_IMPORTED_MODULE_1__.wB)(()=>props.chartHtml,()=>{handleChartHtmlChange()},{immediate:!0}),{chartFrame:chartFrame,directContainer:directContainer,processedHtml:processedHtml,iframeHtml:iframeHtml,useDirectRender:useDirectRender,showDebug:showDebug,showHtmlContent:showHtmlContent,onIframeLoad:onIframeLoad,toggleRenderMode:toggleRenderMode,handleChartHtmlChange:handleChartHtmlChange}}}},4923:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2889),_components_TradingDatePicker_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9838);__webpack_exports__.A={name:"MarketSentiment",components:{TradingDatePicker:_components_TradingDatePicker_vue__WEBPACK_IMPORTED_MODULE_1__.A},data(){return{loading:!1,error:null,selectedDate:"2025-07-15",daysBack:30,sentimentData:{},metadataStats:{},charts:{}}},async mounted(){await this.initializeLatestDate(),this.loadData()},methods:{async initializeLatestDate(){try{const e=await _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.getLatestMarketDate();e.success&&e.data.latest_date&&(this.selectedDate=e.data.latest_date,console.log(`ğŸ”§ DEBUG: è®¾ç½®æœ€æ–°å¯ç”¨æ—¥æœŸ: ${this.selectedDate}`))}catch(e){console.warn("è·å–æœ€æ–°å¸‚åœºæ—¥æœŸå¤±è´¥ï¼Œä½¿ç”¨å½“å‰æ—¥æœŸ:",e)}},async loadData(){this.loading=!0,this.error=null;try{console.log(`ğŸ”§ DEBUG: åŠ è½½æ•°æ®ï¼Œæ—¥æœŸ: ${this.selectedDate}, å‘¨æœŸ: ${this.daysBack}å¤©`);const[e,t,a]=await Promise.all([_services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.getMarketSentiment(this.selectedDate),_services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.getMarketMetadata(this.daysBack),_services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.getMarketSentimentCharts(this.selectedDate,this.daysBack)]);if(e.success?(this.sentimentData=e.data,console.log("å¸‚åœºæƒ…ç»ªæ•°æ®:",this.sentimentData)):console.error("å¸‚åœºæƒ…ç»ªAPIå¤±è´¥:",e),t.success?(this.metadataStats=t.data.stats||{},console.log("å…ƒæ•°æ®ç»Ÿè®¡:",this.metadataStats)):console.error("å…ƒæ•°æ®APIå¤±è´¥:",t),a.success){const e=a.data.charts||{};console.log("ğŸ”§ DEBUG: åŸå§‹å›¾è¡¨æ•°æ®é”®å:",Object.keys(e)),console.log("ğŸ”§ DEBUG: æ¶¨è·Œå¹…åˆ†å¸ƒå›¾æ•°æ®:",e.change_distribution?"å­˜åœ¨":"ä¸å­˜åœ¨"),this.charts={red_ratio_and_amount:e.red_ratio_and_amount,red_ratio_chart:e.red_ratio_chart||e.red_ratio_and_amount,limit_counts:e.limit_up_count,break_counts:e.ground_ceiling_count,continuous_limit:e.continuous_limit_up,ground_ceiling_explosion:e.ground_ceiling_explosion||e.ground_ceiling_count,change_distribution:e.change_distribution},console.log("ğŸ”§ DEBUG: å¤„ç†åçš„å›¾è¡¨æ•°æ®:",Object.keys(this.charts)),console.log("ğŸ”§ DEBUG: æ¶¨è·Œå¹…åˆ†å¸ƒå›¾å†…å®¹é•¿åº¦:",this.charts.change_distribution?this.charts.change_distribution.length:0),console.log("æ˜ å°„åå›¾è¡¨æ•°æ®:",Object.keys(this.charts)),console.log("å›¾è¡¨å†…å®¹æ£€æŸ¥:"),Object.keys(this.charts).forEach(e=>{const t=this.charts[e];console.log(`  ${e}: ${t?"æœ‰å†…å®¹("+t.length+"å­—ç¬¦)":"æ— å†…å®¹"}`)}),this.$nextTick(()=>{this.initializeCharts()})}else console.error("å›¾è¡¨APIå¤±è´¥:",a)}catch(e){console.error("åŠ è½½å¸‚åœºæƒ…ç»ªæ•°æ®å¤±è´¥:",e),this.error="åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}finally{this.loading=!1}},getTrendClass(e,t){return e>t?"positive":e<t?"negative":"neutral"},getTrendIcon(e,t){return e>t?"ğŸ“ˆ":e<t?"ğŸ“‰":"â¡ï¸"},formatAmount(e){return e?`${e}äº¿`:"0äº¿"},initializeCharts(){this.$nextTick(()=>{const chartContainers=document.querySelectorAll(".chart-container");chartContainers.forEach((container,index)=>{if(container&&container.innerHTML.trim()){const chartContent=container.innerHTML;if(chartContent.includes("ladder-chart-container"))console.log("æ£€æµ‹åˆ°è¿æ¿åˆ†å¸ƒç»Ÿè®¡å¤åˆç»“æ„ï¼Œç‰¹æ®Šå¤„ç†"),this.handleContinuousLimitChart(container,chartContent);else if(chartContent.includes("<!DOCTYPE html>")){console.log("æ£€æµ‹åˆ°å®Œæ•´HTMLæ–‡æ¡£ï¼Œä½¿ç”¨iframeæ˜¾ç¤º");const e=document.createElement("iframe");e.style.width="100%",e.style.height="500px",e.style.border="none",e.srcdoc=chartContent,container.innerHTML="",container.appendChild(e),console.log(`å›¾è¡¨ ${index+1} å·²ä½¿ç”¨iframeæ˜¾ç¤º`)}else console.log("æ£€æµ‹åˆ°å›¾è¡¨ç‰‡æ®µï¼Œç›´æ¥æ˜¾ç¤º"),container.style.minHeight="400px",container.style.width="100%",setTimeout(()=>{const scripts=container.querySelectorAll("script");scripts.forEach(script=>{if(script.textContent)try{eval(script.textContent)}catch(error){console.error("JavaScriptæ‰§è¡Œå¤±è´¥:",error)}})},100)}})})},handleContinuousLimitChart(e,t){console.log("å¤„ç†è¿æ¿åˆ†å¸ƒç»Ÿè®¡å¤åˆå›¾è¡¨");const a=document.createElement("div");a.style.width="100%",a.style.minHeight="700px",a.style.overflow="visible",a.innerHTML=t,e.innerHTML="",e.appendChild(a),setTimeout(()=>{this.setupChartSwitching(a)},100)},setupChartSwitching(e){const t=e.querySelector("#lineBtn"),a=e.querySelector("#stackBtn"),l=e.querySelector("#lineChart"),n=e.querySelector("#stackChart");t&&a&&l&&n?(console.log("æ‰¾åˆ°å›¾è¡¨åˆ‡æ¢å…ƒç´ ï¼Œè®¾ç½®äº‹ä»¶ç›‘å¬"),l.style.display="block",n.style.display="none",t.classList.add("active"),a.classList.remove("active"),console.log("é»˜è®¤æ˜¾ç¤ºæŠ˜çº¿å›¾"),t.addEventListener("click",()=>{l.style.display="block",n.style.display="none",t.classList.add("active"),a.classList.remove("active"),console.log("åˆ‡æ¢åˆ°æŠ˜çº¿å›¾"),this.resizeChartsInContainer(l)}),a.addEventListener("click",()=>{l.style.display="none",n.style.display="block",t.classList.remove("active"),a.classList.add("active"),console.log("åˆ‡æ¢åˆ°å †å å›¾"),this.resizeChartsInContainer(n)}),this.executeChartScripts(l),this.executeChartScripts(n),this.resizeChartsInContainer(l)):console.warn("æœªæ‰¾åˆ°å›¾è¡¨åˆ‡æ¢å…ƒç´ ")},executeChartScripts(chartContainer){if(chartContainer){const scripts=chartContainer.querySelectorAll("script");scripts.forEach(script=>{if(script.textContent)try{eval(script.textContent),console.log("å›¾è¡¨JavaScriptä»£ç æ‰§è¡ŒæˆåŠŸ")}catch(error){console.error("å›¾è¡¨JavaScriptæ‰§è¡Œå¤±è´¥:",error)}})}},resizeChartsInContainer(e){setTimeout(()=>{if(window.echarts&&e){const t=e.querySelectorAll("[_echarts_instance_]");t.forEach(e=>{const t=window.echarts.getInstanceByDom(e);t&&(e.style.width="100%",e.style.height="500px",t.resize(),console.log("å›¾è¡¨å·²é‡æ–°æ¸²æŸ“ï¼Œå®¹å™¨:",e))})}},100)},async refreshCharts(){try{this.loading=!0,console.log(`ğŸ”§ DEBUG: åˆ·æ–°å›¾è¡¨ï¼Œæ—¥æœŸ: ${this.selectedDate}, å‘¨æœŸ: ${this.daysBack}å¤©`);const e=await _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.getMarketSentimentCharts(this.selectedDate,this.daysBack);if(e.success){const t=e.data.charts||{};console.log("ğŸ”§ DEBUG: åˆ·æ–°è·å–çš„å›¾è¡¨é”®å:",Object.keys(t)),this.charts={red_ratio_and_amount:t.red_ratio_and_amount,limit_counts:t.limit_up_count,break_counts:t.ground_ceiling_count,continuous_limit:t.continuous_limit_up,ground_ceiling_explosion:t.ground_ceiling_explosion||t.ground_ceiling_count,change_distribution:t.change_distribution},console.log("åˆ·æ–°å›¾è¡¨æˆåŠŸ:",Object.keys(this.charts)),console.log("åˆ·æ–°åå›¾è¡¨å†…å®¹æ£€æŸ¥:"),Object.keys(this.charts).forEach(e=>{const t=this.charts[e];console.log(`  ${e}: ${t?"æœ‰å†…å®¹("+t.length+"å­—ç¬¦)":"æ— å†…å®¹"}`)}),this.$nextTick(()=>{this.initializeCharts()})}}catch(e){console.error("åˆ·æ–°å›¾è¡¨å¤±è´¥:",e),this.$message.error("åˆ·æ–°å›¾è¡¨å¤±è´¥")}finally{this.loading=!1}},formatPercentage(e){return null===e||void 0===e?"0.00":Number(e).toFixed(2)},formatAmount(e){return null===e||void 0===e||0===e?"0äº¿":`${Number(e).toFixed(0)}äº¿`},formatChange(e,t=""){if(null===e||void 0===e||0===e)return"æ— å˜åŒ–";const a=e>0?"+":"";return`${a}${Number(e).toFixed(2)}${t}`},formatAmountChange(e,t){if(null===e||void 0===e||0===e)return"æ— å˜åŒ–";const a=e>0?"+":"",l=`${a}${Number(e).toFixed(0)}äº¿`;if(null!==t&&void 0!==t&&0!==t){const e=t>0?"+":"";return`${l} (${e}${Number(t).toFixed(1)}%)`}return l},getChangeClass(e){return null===e||void 0===e||0===e?"change-neutral":e>0?"change-positive":"change-negative"},getTrendClass(e,t=50){return e>t?"positive":e<t?"negative":"neutral"},getTrendIcon(e,t=50){return e>t?"ğŸ“ˆ":e<t?"ğŸ“‰":"â¡ï¸"},createChangeDistributionChart(){const e=document.getElementById("changeDistributionChart");if(!e)return void console.warn("æ¶¨è·Œå¹…åˆ†å¸ƒå›¾å®¹å™¨æœªæ‰¾åˆ°");const t=this.generateChangeDistributionData();if("undefined"===typeof echarts)return console.warn("EChartsæœªåŠ è½½ï¼Œå°è¯•ä»CDNåŠ è½½"),void this.loadEChartsAndCreateChart(e,t);this.renderChangeDistributionChart(e,t)},generateChangeDistributionData(){const{up_count:e=0,down_count:t=0,flat_count:a=0}=this.sentimentData,l=e+t+a;if(0===l)return[];const n=[{label:"è·Œåœ",range:"â‰¤-9.5%",count:Math.floor(.05*t),color:"#8B0000"},{label:"å¤§è·Œ",range:"-9.5%~-5%",count:Math.floor(.15*t),color:"#DC143C"},{label:"ä¸­è·Œ",range:"-5%~-3%",count:Math.floor(.25*t),color:"#FF6347"},{label:"å°è·Œ",range:"-3%~-1%",count:Math.floor(.35*t),color:"#FFA07A"},{label:"å¾®è·Œ",range:"-1%~0%",count:Math.floor(.2*t),color:"#FFB6C1"},{label:"å¹³ç›˜",range:"0%",count:a,color:"#808080"},{label:"å¾®æ¶¨",range:"0%~1%",count:Math.floor(.2*e),color:"#98FB98"},{label:"å°æ¶¨",range:"1%~3%",count:Math.floor(.35*e),color:"#90EE90"},{label:"ä¸­æ¶¨",range:"3%~5%",count:Math.floor(.25*e),color:"#32CD32"},{label:"å¤§æ¶¨",range:"5%~9.5%",count:Math.floor(.15*e),color:"#228B22"},{label:"æ¶¨åœ",range:"â‰¥9.5%",count:Math.floor(.05*e),color:"#006400"}];return n.map(e=>({...e,percentage:l>0?(e.count/l*100).toFixed(2):"0.00"}))},loadEChartsAndCreateChart(e,t){const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js",a.onload=()=>{console.log("EChartsåŠ è½½æˆåŠŸ"),this.renderChangeDistributionChart(e,t)},a.onerror=()=>{console.error("EChartsåŠ è½½å¤±è´¥"),e.innerHTML='<div class="no-data">å›¾è¡¨åŠ è½½å¤±è´¥</div>'},document.head.appendChild(a)},renderChangeDistributionChart(e,t){const a=echarts.init(e),l={title:{text:"æ¶¨è·Œå¹…åˆ†å¸ƒ",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:function(e){return`${e.name}<br/>\n                    æ•°é‡: ${e.data.count}åª<br/>\n                    å æ¯”: ${e.data.percentage}%<br/>\n                    åŒºé—´: ${e.data.range}`}},legend:{orient:"vertical",right:10,top:"middle",textStyle:{fontSize:12}},series:[{name:"æ¶¨è·Œå¹…åˆ†å¸ƒ",type:"pie",radius:["35%","65%"],center:["40%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold",formatter:function(e){return`${e.name}\n${e.data.count}åª\n${e.data.percentage}%`}}},labelLine:{show:!1},data:t.map(e=>({name:e.label,value:e.count,count:e.count,percentage:e.percentage,range:e.range,itemStyle:{color:e.color}}))}]};a.setOption(l),window.addEventListener("resize",()=>{a.resize()}),console.log("æ¶¨è·Œå¹…åˆ†å¸ƒå›¾æ¸²æŸ“å®Œæˆ")},createMarketVolumeChart(){const e=document.getElementById("marketVolumeChart");if(!e)return void console.warn("å¸‚åœºé‡èƒ½å›¾å®¹å™¨æœªæ‰¾åˆ°");const t=this.generateMarketVolumeData();if("undefined"===typeof echarts)return console.warn("EChartsæœªåŠ è½½ï¼Œå°è¯•ä»CDNåŠ è½½"),void this.loadEChartsAndCreateVolumeChart(e,t);this.renderMarketVolumeChart(e,t)},generateMarketVolumeData(){const e=30,t=[],a=new Date;for(let l=e-1;l>=0;l--){const e=new Date(a);if(e.setDate(e.getDate()-l),0===e.getDay()||6===e.getDay())continue;const n=e.toISOString().split("T")[0],s=this.sentimentData.total_amount||15e3,o=.8+.4*Math.random(),r=Math.round(s*o);t.push({date:n,volume:r,displayDate:`${e.getMonth()+1}/${e.getDate()}`})}return t},loadEChartsAndCreateVolumeChart(e,t){if("undefined"!==typeof echarts)return void this.renderMarketVolumeChart(e,t);const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js",a.onload=()=>{console.log("EChartsåŠ è½½æˆåŠŸï¼ˆé‡èƒ½å›¾ï¼‰"),this.renderMarketVolumeChart(e,t)},a.onerror=()=>{console.error("EChartsåŠ è½½å¤±è´¥ï¼ˆé‡èƒ½å›¾ï¼‰"),e.innerHTML='<div class="no-data">å›¾è¡¨åŠ è½½å¤±è´¥</div>'},document.head.appendChild(a)},renderMarketVolumeChart(e,t){const a=echarts.init(e),l={title:{text:"",left:"center",textStyle:{fontSize:14,fontWeight:"bold"}},tooltip:{trigger:"axis",formatter:function(e){const t=e[0];return`${t.axisValue}<br/>\n                    æˆäº¤é¢: ${t.value}äº¿å…ƒ`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.map(e=>e.displayDate),axisLabel:{fontSize:12,color:"#666"},axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",name:"æˆäº¤é¢(äº¿)",nameTextStyle:{color:"#666",fontSize:12},axisLabel:{fontSize:12,color:"#666",formatter:"{value}äº¿"},axisLine:{lineStyle:{color:"#ddd"}},splitLine:{lineStyle:{color:"#f0f0f0"}}},series:[{name:"æˆäº¤é¢",type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{color:"#409EFF",width:3},itemStyle:{color:"#409EFF",borderColor:"#fff",borderWidth:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.3)"},{offset:1,color:"rgba(64, 158, 255, 0.05)"}]}},data:t.map(e=>e.volume)}]};a.setOption(l),window.addEventListener("resize",()=>{a.resize()}),console.log("å¸‚åœºé‡èƒ½æŠ˜çº¿å›¾æ¸²æŸ“å®Œæˆ")}}}},5318:function(e,t,a){var l=a(3751),n=a(641);const s={id:"app"},o={class:"header-content"},r={class:"logo"},i={class:"header-info"};function c(e,t,a,l,c,d){const u=(0,n.g2)("TrendCharts"),p=(0,n.g2)("el-icon"),h=(0,n.g2)("el-tag"),g=(0,n.g2)("el-text"),m=(0,n.g2)("el-header"),k=(0,n.g2)("el-menu-item"),_=(0,n.g2)("Odometer"),v=(0,n.g2)("Grid"),b=(0,n.g2)("Lightning"),f=(0,n.g2)("Star"),y=(0,n.g2)("Money"),C=(0,n.g2)("el-sub-menu"),w=(0,n.g2)("el-menu"),F=(0,n.g2)("el-aside"),D=(0,n.g2)("router-view"),L=(0,n.g2)("el-main"),x=(0,n.g2)("el-container"),S=(0,n.g2)("el-loading"),E=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(m,{class:"app-header"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",o,[(0,n.Lk)("div",r,[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(u)]),_:1}),t[1]||(t[1]=(0,n.Lk)("span",{class:"title"},"è‚¡ç¥¨åˆ†æç³»ç»Ÿ",-1)),(0,n.bF)(h,{type:"success",size:"small"},{default:(0,n.k6)(()=>t[0]||(t[0]=[(0,n.eW)("Vue + Flask")])),_:1,__:[0]})]),(0,n.Lk)("div",i,[(0,n.bF)(g,{type:"info"},{default:(0,n.k6)(()=>t[2]||(t[2]=[(0,n.eW)("çœŸæ­£çš„æ¨¡å—åŒ– Â· é«˜æ€§èƒ½ Â· ç°ä»£åŒ–")])),_:1,__:[2]})])])]),_:1}),(0,n.bF)(x,{class:"app-container"},{default:(0,n.k6)(()=>[(0,n.bF)(F,{width:"250px",class:"app-sidebar"},{default:(0,n.k6)(()=>[(0,n.bF)(w,{"default-active":e.$route.path,"default-openeds":l.defaultOpeneds,router:"",class:"sidebar-menu","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#ffffff"},{default:(0,n.k6)(()=>[(0,n.bF)(k,{index:"/index-analysis"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(u)]),_:1}),t[3]||(t[3]=(0,n.Lk)("span",null,"æŒ‡æ•°åˆ†æ",-1))]),_:1,__:[3]}),(0,n.bF)(k,{index:"/sentiment"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(_)]),_:1}),t[4]||(t[4]=(0,n.Lk)("span",null,"å¸‚åœºæƒ…ç»ª",-1))]),_:1,__:[4]}),(0,n.bF)(k,{index:"/sectors"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(v)]),_:1}),t[5]||(t[5]=(0,n.Lk)("span",null,"æ¿å—åˆ†æ",-1))]),_:1,__:[5]}),(0,n.bF)(C,{index:"strong-stocks"},{title:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(u)]),_:1}),t[6]||(t[6]=(0,n.Lk)("span",null,"å¼ºåŠ¿è‚¡åˆ†æ",-1))]),default:(0,n.k6)(()=>[(0,n.bF)(k,{index:"/strong-stocks/new-high"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(u)]),_:1}),t[7]||(t[7]=(0,n.Lk)("span",null,"æ–°é«˜è‚¡ç¥¨",-1))]),_:1,__:[7]}),(0,n.bF)(k,{index:"/strong-stocks/heima"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1}),t[8]||(t[8]=(0,n.Lk)("span",null,"é»‘é©¬åˆ†æ",-1))]),_:1,__:[8]}),(0,n.bF)(k,{index:"/strong-stocks/baima"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(f)]),_:1}),t[9]||(t[9]=(0,n.Lk)("span",null,"ç™½é©¬åˆ†æ",-1))]),_:1,__:[9]}),(0,n.bF)(k,{index:"/strong-stocks/money-effect"},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.bF)(y)]),_:1}),t[10]||(t[10]=(0,n.Lk)("span",null,"èµšäºé’±æ•ˆåº”",-1))]),_:1,__:[10]})]),_:1})]),_:1},8,["default-active","default-openeds"])]),_:1}),(0,n.bF)(L,{class:"app-main"},{default:(0,n.k6)(()=>[(0,n.bF)(D)]),_:1})]),_:1}),(0,n.bo)((0,n.bF)(S,{"element-loading-text":"æ­£åœ¨åŠ è½½æ•°æ®...","element-loading-background":"rgba(0, 0, 0, 0.8)","body-style":"{ overflow: 'hidden' }"},null,512),[[E,l.globalLoading]])])}var d=a(953),u=a(5220),p={name:"App",setup(){const e=(0,d.KR)(!1),t=(0,u.lq)(),a=(0,n.EW)(()=>{const e=t.path,a=[];return e.startsWith("/strong-stocks/")&&a.push("strong-stocks"),a});return{globalLoading:e,defaultOpeneds:a}}},h=a(6262);const g=(0,h.A)(p,[["render",c]]);var m=g,k=a(33);const _={class:"market-sentiment"},v={class:"header"},b={class:"header-content"},f={class:"header-actions"},y={class:"controls"},C={key:0,class:"loading"},w={key:1,class:"sentiment-overview"},F={class:"metric"},D={class:"metric-value"},L={key:0,class:"metric-change"},x={class:"metric"},S={class:"metric-value"},E={key:0,class:"metric-change"},M={class:"metric"},A={class:"metric-value"},K={key:0,class:"metric-change"},T={class:"metric"},I={class:"metric-value"},V={key:0,class:"metric-change"},$={key:2,class:"charts-section"},Y={class:"charts-row"},R=["innerHTML"],W={key:1,class:"no-data"},P=["innerHTML"],O={key:1,class:"no-data"},X={class:"charts-row"},B={class:"combined-chart-container"},H={class:"red-ratio-section"},N=["innerHTML"],U={key:1,class:"no-data"},j=["innerHTML"],z={key:1,class:"no-data"},G=["innerHTML"],q={key:1,class:"no-data"},Q={key:3,class:"error-message"};function Z(e,t,a,l,s,o){const r=(0,n.g2)("Refresh"),i=(0,n.g2)("el-icon"),c=(0,n.g2)("el-button"),d=(0,n.g2)("TradingDatePicker"),u=(0,n.g2)("el-col"),p=(0,n.g2)("el-option"),h=(0,n.g2)("el-select"),g=(0,n.g2)("el-row"),m=(0,n.g2)("el-skeleton"),Z=(0,n.g2)("el-card"),J=(0,n.g2)("el-alert");return(0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",v,[(0,n.Lk)("div",b,[t[3]||(t[3]=(0,n.Lk)("div",null,[(0,n.Lk)("h1",null,"ğŸ­ å¸‚åœºæƒ…ç»ªåˆ†æ"),(0,n.Lk)("p",null,"å…¨é¢åˆ†æå¸‚åœºæƒ…ç»ªæŒ‡æ ‡ï¼ŒæŠŠæ¡å¸‚åœºè„‰æ")],-1)),(0,n.Lk)("div",f,[(0,n.bF)(c,{type:"primary",onClick:o.refreshCharts,loading:s.loading},{default:(0,n.k6)(()=>[(0,n.bF)(i,null,{default:(0,n.k6)(()=>[(0,n.bF)(r)]),_:1}),t[2]||(t[2]=(0,n.eW)(" åˆ·æ–°å›¾è¡¨ "))]),_:1,__:[2]},8,["onClick","loading"])])])]),(0,n.Lk)("div",y,[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(d,{modelValue:s.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedDate=e),type:"date",placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","enable-holiday-marking":!0,"disable-non-trading-days":!0,"disable-future-dates":!0,onChange:o.loadData},null,8,["modelValue","onChange"])]),_:1}),(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(h,{modelValue:s.daysBack,"onUpdate:modelValue":t[1]||(t[1]=e=>s.daysBack=e),placeholder:"åˆ†æå‘¨æœŸ",onChange:o.loadData},{default:(0,n.k6)(()=>[(0,n.bF)(p,{label:"æœ€è¿‘7å¤©",value:7}),(0,n.bF)(p,{label:"æœ€è¿‘15å¤©",value:15}),(0,n.bF)(p,{label:"æœ€è¿‘30å¤©",value:30}),(0,n.bF)(p,{label:"æœ€è¿‘60å¤©",value:60}),(0,n.bF)(p,{label:"æœ€è¿‘90å¤©",value:90})]),_:1},8,["modelValue","onChange"])]),_:1}),(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(c,{type:"primary",onClick:o.loadData,loading:s.loading},{default:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.Lk)("i",{class:"el-icon-refresh"},null,-1),(0,n.eW)(" åˆ·æ–°æ•°æ® ")])),_:1,__:[4]},8,["onClick","loading"])]),_:1})]),_:1})]),s.loading?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.bF)(m,{rows:5,animated:""})])):(0,n.Q3)("",!0),s.loading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",w,[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{class:"metric-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",F,[(0,n.Lk)("div",D,(0,k.v_)(o.formatPercentage(s.sentimentData.red_ratio))+"%",1),t[5]||(t[5]=(0,n.Lk)("div",{class:"metric-label"},"çº¢ç›˜ç‡",-1)),s.sentimentData.changes?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("span",{class:(0,k.C4)(o.getChangeClass(s.sentimentData.changes.red_ratio_change))},(0,k.v_)(o.formatChange(s.sentimentData.changes.red_ratio_change,"%")),3)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,k.C4)(["metric-trend",o.getTrendClass(s.sentimentData.red_ratio,50)])},(0,k.v_)(o.getTrendIcon(s.sentimentData.red_ratio,50)),3)])]),_:1})]),_:1}),(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{class:"metric-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",x,[(0,n.Lk)("div",S,(0,k.v_)(s.sentimentData.limit_up_count||0),1),t[6]||(t[6]=(0,n.Lk)("div",{class:"metric-label"},"æ¶¨åœæ•°é‡",-1)),s.sentimentData.changes?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("span",{class:(0,k.C4)(o.getChangeClass(s.sentimentData.changes.limit_up_change))},(0,k.v_)(o.formatChange(s.sentimentData.changes.limit_up_change)),3)])):(0,n.Q3)("",!0),t[7]||(t[7]=(0,n.Lk)("div",{class:"metric-trend positive"},"ğŸ“ˆ",-1))])]),_:1})]),_:1}),(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{class:"metric-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",M,[(0,n.Lk)("div",A,(0,k.v_)(s.sentimentData.limit_down_count||0),1),t[8]||(t[8]=(0,n.Lk)("div",{class:"metric-label"},"è·Œåœæ•°é‡",-1)),s.sentimentData.changes?((0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("span",{class:(0,k.C4)(o.getChangeClass(s.sentimentData.changes.limit_down_change))},(0,k.v_)(o.formatChange(s.sentimentData.changes.limit_down_change)),3)])):(0,n.Q3)("",!0),t[9]||(t[9]=(0,n.Lk)("div",{class:"metric-trend negative"},"ğŸ“‰",-1))])]),_:1})]),_:1}),(0,n.bF)(u,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{class:"metric-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",T,[(0,n.Lk)("div",I,(0,k.v_)(o.formatAmount(s.sentimentData.total_amount)),1),t[10]||(t[10]=(0,n.Lk)("div",{class:"metric-label"},"æ²ªæ·±æˆäº¤é¢",-1)),s.sentimentData.changes?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("span",{class:(0,k.C4)(o.getChangeClass(s.sentimentData.changes.total_amount_change))},(0,k.v_)(o.formatAmountChange(s.sentimentData.changes.total_amount_change,s.sentimentData.changes.total_amount_change_pct)),3)])):(0,n.Q3)("",!0),t[11]||(t[11]=(0,n.Lk)("div",{class:"metric-trend"},"ğŸ’°",-1))])]),_:1})]),_:1})]),_:1})])),s.loading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",$,[(0,n.Lk)("div",Y,[(0,n.bF)(Z,{class:"chart-card chart-half"},{header:(0,n.k6)(()=>t[12]||(t[12]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ“Š æ¶¨è·Œå¹…åˆ†å¸ƒ")],-1)])),default:(0,n.k6)(()=>[s.charts.change_distribution?((0,n.uX)(),(0,n.CE)("div",{key:0,innerHTML:s.charts.change_distribution,class:"chart-container"},null,8,R)):((0,n.uX)(),(0,n.CE)("div",W,"æš‚æ— æ¶¨è·Œå¹…åˆ†å¸ƒæ•°æ®"))]),_:1}),(0,n.bF)(Z,{class:"chart-card chart-half"},{header:(0,n.k6)(()=>t[13]||(t[13]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"âš¡ åœ°å¤©æ¿|å¤©åœ°æ¿|ç‚¸æ¿åˆ†æ")],-1)])),default:(0,n.k6)(()=>[s.charts.ground_ceiling_explosion?((0,n.uX)(),(0,n.CE)("div",{key:0,innerHTML:s.charts.ground_ceiling_explosion,class:"chart-container"},null,8,P)):((0,n.uX)(),(0,n.CE)("div",O,"æš‚æ— åœ°å¤©ç‚¸æ¿æ•°æ®"))]),_:1})]),(0,n.Lk)("div",X,[(0,n.bF)(Z,{class:"chart-card chart-half"},{header:(0,n.k6)(()=>t[14]||(t[14]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ”´ å¸‚åœºçº¢ç›˜ç‡ä¸é‡èƒ½åˆ†æ")],-1)])),default:(0,n.k6)(()=>[(0,n.Lk)("div",B,[(0,n.Lk)("div",H,[s.charts.red_ratio_chart?((0,n.uX)(),(0,n.CE)("div",{key:0,innerHTML:s.charts.red_ratio_chart,class:"chart-container"},null,8,N)):((0,n.uX)(),(0,n.CE)("div",U,"æš‚æ— çº¢ç›˜ç‡æ•°æ®"))])])]),_:1}),(0,n.bF)(Z,{class:"chart-card chart-half"},{header:(0,n.k6)(()=>t[15]||(t[15]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ“Š æ¶¨åœ/è·Œåœè‚¡æ•°é‡èµ°åŠ¿")],-1)])),default:(0,n.k6)(()=>[s.charts.limit_counts?((0,n.uX)(),(0,n.CE)("div",{key:0,innerHTML:s.charts.limit_counts,class:"chart-container"},null,8,j)):((0,n.uX)(),(0,n.CE)("div",z,"æš‚æ— æ¶¨è·Œåœæ•°æ®"))]),_:1})]),(0,n.bF)(Z,{class:"chart-card"},{header:(0,n.k6)(()=>t[16]||(t[16]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ”¥ è¿æ¿åˆ†å¸ƒç»Ÿè®¡")],-1)])),default:(0,n.k6)(()=>[s.charts.continuous_limit?((0,n.uX)(),(0,n.CE)("div",{key:0,innerHTML:s.charts.continuous_limit,class:"chart-container"},null,8,G)):((0,n.uX)(),(0,n.CE)("div",q,"æš‚æ— è¿æ¿æ•°æ®"))]),_:1})])),s.error?((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.bF)(J,{title:s.error,type:"error","show-icon":"",closable:!1},null,8,["title"])])):(0,n.Q3)("",!0)])}var J=a(4923);const ee=(0,h.A)(J.A,[["render",Z],["__scopeId","data-v-d993e6a2"]]);var te=ee;const ae={class:"new-high-stocks"},le={class:"control-item"},ne={class:"control-item"},se={class:"control-item"},oe={class:"control-item"},re={key:0,class:"result-summary"},ie={class:"card-header"},ce={class:"price"},de={class:"volume"},ue={class:"card-header"},pe={key:0},he={key:1},ge={class:"kline-container"},me={key:0,class:"empty-state"},ke={key:1,class:"loading-state"},_e={key:2,class:"kline-chart"},ve={key:3,class:"error-state"},be={key:0,class:"stock-info"},fe={class:"price"};function ye(e,t,a,l,s,o){const r=(0,n.g2)("trading-date-picker"),i=(0,n.g2)("el-col"),c=(0,n.g2)("el-option"),d=(0,n.g2)("el-select"),u=(0,n.g2)("el-checkbox"),p=(0,n.g2)("Search"),h=(0,n.g2)("el-icon"),g=(0,n.g2)("el-button"),m=(0,n.g2)("el-tag"),_=(0,n.g2)("el-row"),v=(0,n.g2)("el-card"),b=(0,n.g2)("Download"),f=(0,n.g2)("el-table-column"),y=(0,n.g2)("el-table"),C=(0,n.g2)("el-empty"),w=(0,n.g2)("el-skeleton"),F=(0,n.g2)("v-chart"),D=(0,n.g2)("el-descriptions-item"),L=(0,n.g2)("el-descriptions");return(0,n.uX)(),(0,n.CE)("div",ae,[t[12]||(t[12]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ”¥ æ–°é«˜è‚¡ç¥¨åˆ†æ")],-1)),(0,n.bF)(v,{class:"control-panel"},{default:(0,n.k6)(()=>[(0,n.bF)(_,{gutter:20,align:"middle"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",le,[t[4]||(t[4]=(0,n.Lk)("label",null,"é€‰æ‹©æ—¥æœŸ",-1)),(0,n.bF)(r,{modelValue:l.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedDate=e),placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ne,[t[5]||(t[5]=(0,n.Lk)("label",null,"æ–°é«˜å‘¨æœŸ",-1)),(0,n.bF)(d,{modelValue:l.selectedPeriod,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectedPeriod=e),placeholder:"é€‰æ‹©å‘¨æœŸ",style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(c,{label:"5æ—¥æ–°é«˜",value:5}),(0,n.bF)(c,{label:"10æ—¥æ–°é«˜",value:10}),(0,n.bF)(c,{label:"20æ—¥æ–°é«˜",value:20}),(0,n.bF)(c,{label:"60æ—¥æ–°é«˜",value:60})]),_:1},8,["modelValue"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",se,[t[8]||(t[8]=(0,n.Lk)("label",null,"è¿‡æ»¤é€‰é¡¹",-1)),(0,n.bF)(u,{modelValue:l.filterOptions.excludeST,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filterOptions.excludeST=e),style:{display:"block","margin-bottom":"8px"}},{default:(0,n.k6)(()=>t[6]||(t[6]=[(0,n.eW)(" å»æ‰STè‚¡ç¥¨ ")])),_:1,__:[6]},8,["modelValue"]),(0,n.bF)(u,{modelValue:l.filterOptions.includeNonMainBoard,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filterOptions.includeNonMainBoard=e)},{default:(0,n.k6)(()=>t[7]||(t[7]=[(0,n.eW)(" åŒ…å«éä¸»æ¿è‚¡ç¥¨ ")])),_:1,__:[7]},8,["modelValue"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",oe,[t[10]||(t[10]=(0,n.Lk)("label",null,"Â ",-1)),(0,n.bF)(g,{type:"primary",onClick:l.analyzeNewHigh,loading:l.analyzing,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(h,null,{default:(0,n.k6)(()=>[(0,n.bF)(p)]),_:1}),t[9]||(t[9]=(0,n.eW)(" åˆ†ææ–°é«˜è‚¡ç¥¨ "))]),_:1,__:[9]},8,["onClick","loading"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:24,md:6},{default:(0,n.k6)(()=>[l.stockList.length>0?((0,n.uX)(),(0,n.CE)("div",re,[(0,n.bF)(m,{type:"success",size:"large"},{default:(0,n.k6)(()=>[(0,n.eW)(" æ‰¾åˆ° "+(0,k.v_)(l.stockList.length)+" åªæ–°é«˜è‚¡ç¥¨ ",1)]),_:1})])):(0,n.Q3)("",!0)]),_:1})]),_:1})]),_:1}),l.stockList.length>0?((0,n.uX)(),(0,n.Wv)(_,{key:0,gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{xs:24,lg:14},{default:(0,n.k6)(()=>[(0,n.bF)(v,{class:"stock-list-card"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",ie,[(0,n.Lk)("span",null,(0,k.v_)(l.selectedPeriod)+"æ—¥æ–°é«˜è‚¡ç¥¨åˆ—è¡¨",1),(0,n.bF)(g,{type:"text",onClick:l.exportData},{default:(0,n.k6)(()=>[(0,n.bF)(h,null,{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1}),t[11]||(t[11]=(0,n.eW)(" å¯¼å‡ºæ•°æ® "))]),_:1,__:[11]},8,["onClick"])])]),default:(0,n.k6)(()=>[(0,n.bF)(y,{data:l.stockList,stripe:"","highlight-current-row":"",onCurrentChange:l.handleStockSelect,style:{width:"100%"},"max-height":"600"},{default:(0,n.k6)(()=>[(0,n.bF)(f,{prop:"åç§°",label:"åç§°",width:"100",fixed:"left"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(g,{type:"text",onClick:t=>l.selectStock(e)},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.åç§°),1)]),_:2},1032,["onClick"])]),_:1}),(0,n.bF)(f,{prop:"ä»£ç ",label:"ä»£ç ",width:"80"}),(0,n.bF)(f,{prop:"æ”¶ç›˜ä»·",label:"æ”¶ç›˜ä»·",width:"80",align:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",ce,(0,k.v_)(l.formatNumber(e.æ”¶ç›˜ä»·)),1)]),_:1}),(0,n.bF)(f,{prop:"æ¶¨è·Œå¹…",label:"å½“æ—¥æ¶¨è·Œå¹…",width:"100",align:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(e.æ¶¨è·Œå¹…)),3)]),_:1}),(0,n.bF)(f,{prop:"5æ—¥æ¶¨è·Œå¹…(%)",label:"5æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["5æ—¥æ¶¨è·Œå¹…(%)"]))},(0,k.v_)(l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…(%)"])),3)]),_:1}),(0,n.bF)(f,{prop:"10æ—¥æ¶¨è·Œå¹…(%)",label:"10æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["10æ—¥æ¶¨è·Œå¹…(%)"]))},(0,k.v_)(l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…(%)"])),3)]),_:1}),(0,n.bF)(f,{prop:"20æ—¥æ¶¨è·Œå¹…(%)",label:"20æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["20æ—¥æ¶¨è·Œå¹…(%)"]))},(0,k.v_)(l.formatPercent(e["20æ—¥æ¶¨è·Œå¹…(%)"])),3)]),_:1}),(0,n.bF)(f,{prop:"æˆäº¤é‡",label:"æˆäº¤é‡",width:"100",align:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",de,(0,k.v_)(l.formatVolume(e.æˆäº¤é‡)),1)]),_:1})]),_:1},8,["data","onCurrentChange"])]),_:1})]),_:1}),(0,n.bF)(i,{xs:24,lg:10},{default:(0,n.k6)(()=>[(0,n.bF)(v,{class:"kline-card"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",ue,[l.selectedStock?((0,n.uX)(),(0,n.CE)("span",pe,(0,k.v_)(l.selectedStock.åç§°)+" ("+(0,k.v_)(l.selectedStock.ä»£ç )+") Kçº¿å›¾ ",1)):((0,n.uX)(),(0,n.CE)("span",he,"è¯·é€‰æ‹©è‚¡ç¥¨æŸ¥çœ‹Kçº¿å›¾"))])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",ge,[l.selectedStock?l.loadingKline?((0,n.uX)(),(0,n.CE)("div",ke,[(0,n.bF)(w,{rows:8,animated:""})])):l.klineData.length>0?((0,n.uX)(),(0,n.CE)("div",_e,[(0,n.bF)(F,{option:l.klineOption,style:{height:"400px",width:"100%"},autoresize:""},null,8,["option"])])):((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.bF)(C,{description:"æš‚æ— Kçº¿æ•°æ®"})])):((0,n.uX)(),(0,n.CE)("div",me,[(0,n.bF)(C,{description:"è¯·ä»å·¦ä¾§åˆ—è¡¨é€‰æ‹©è‚¡ç¥¨"})]))]),l.selectedStock?((0,n.uX)(),(0,n.CE)("div",be,[(0,n.bF)(L,{column:2,size:"small",border:""},{default:(0,n.k6)(()=>[(0,n.bF)(D,{label:"è‚¡ç¥¨åç§°"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(l.selectedStock.åç§°),1)]),_:1}),(0,n.bF)(D,{label:"è‚¡ç¥¨ä»£ç "},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(l.selectedStock.ä»£ç ),1)]),_:1}),(0,n.bF)(D,{label:"æ”¶ç›˜ä»·"},{default:(0,n.k6)(()=>[(0,n.Lk)("span",fe,(0,k.v_)(l.formatNumber(l.selectedStock.æ”¶ç›˜ä»·)),1)]),_:1}),(0,n.bF)(D,{label:"å½“æ—¥æ¶¨è·Œå¹…"},{default:(0,n.k6)(()=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.æ¶¨è·Œå¹…)),3)]),_:1})]),_:1})])):(0,n.Q3)("",!0)]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0),l.analyzing||0!==l.stockList.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(v,{key:1,class:"empty-card"},{default:(0,n.k6)(()=>[(0,n.bF)(C,{description:"è¯·é€‰æ‹©æ—¥æœŸå’Œå‘¨æœŸï¼Œç„¶åç‚¹å‡»åˆ†ææŒ‰é’®"})]),_:1}))])}var Ce=a(3087),we=a(9952),Fe=a(3487),De=a(7719),Le=a(4064),xe=a(3416),Se=a(5690),Ee=a(5620),Me=a(5967),Ae=a(3508),Ke=a(2889),Te=a(9838);(0,Ce.Y)([we.a,Fe.a,De.a,Le.a,xe.a,Se.a,Ee.a,Me.a]);var Ie={name:"NewHighStocks",components:{VChart:Ae.Ay,TradingDatePicker:Te.A},setup(){const e=(0,d.KR)((new Date).toISOString().split("T")[0]),t=(0,d.KR)(5),a=(0,d.KR)(!1),l=(0,d.KR)([]),s=(0,d.KR)(null),o=(0,d.KR)(!1),r=(0,d.KR)([]),i=(0,d.KR)({excludeST:!0,includeNonMainBoard:!1}),c=(0,n.EW)(()=>Ke.Wp.formatNumber),u=(0,n.EW)(()=>Ke.Wp.formatPercent),p=(0,n.EW)(()=>Ke.Wp.formatVolume),h=(0,n.EW)(()=>{if(0===r.value.length)return{};const e=r.value.map(e=>e.date),t=r.value.map(e=>[e.open,e.close,e.low,e.high]),a=r.value.map(e=>e.volume),l=r.value.map(e=>e.ma5),n=r.value.map(e=>e.ma10),o=r.value.map(e=>e.ma20);return{title:{text:`${s.value?.åç§°} Kçº¿å›¾`,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:[{name:"MA5",icon:"rect",itemStyle:{color:"#4ECDC4"}},{name:"MA10",icon:"rect",itemStyle:{color:"#ffbf00"}},{name:"MA20",icon:"rect",itemStyle:{color:"#f92672"}}],top:30,right:10},grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"70%",height:"16%"}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100}],series:[{name:"Kçº¿",type:"candlestick",data:t,itemStyle:{color:"#ef232a",color0:"#14b143",borderColor:"#ef232a",borderColor0:"#14b143"}},{name:"MA5",type:"line",data:l,smooth:!0,lineStyle:{color:"#4ECDC4",width:1},itemStyle:{color:"#4ECDC4"},symbol:"none"},{name:"MA10",type:"line",data:n,smooth:!0,lineStyle:{color:"#ffbf00",width:1},itemStyle:{color:"#ffbf00"},symbol:"none"},{name:"MA20",type:"line",data:o,smooth:!0,lineStyle:{color:"#f92672",width:1},itemStyle:{color:"#f92672"},symbol:"none"},{name:"æˆäº¤é‡",type:"bar",xAxisIndex:1,yAxisIndex:1,data:a.map((e,a)=>{const l=t[a],n=l&&l[1]>=l[0];return{value:e,itemStyle:{color:n?"#ef232a":"#14b143"}}})}]}}),g=async()=>{if(e.value)try{a.value=!0,console.log(`ğŸ”„ åˆ†æ${t.value}æ—¥æ–°é«˜è‚¡ç¥¨...`);const n=await Ke.Ay.getNewHighStocks(e.value,t.value,i.value);l.value=n.data.stocks||[],console.log(`âœ… æ‰¾åˆ° ${l.value.length} åªæ–°é«˜è‚¡ç¥¨`)}catch(n){console.error("âŒ æ–°é«˜è‚¡ç¥¨åˆ†æå¤±è´¥:",n),l.value=[]}finally{a.value=!1}else ElMessage.warning("è¯·é€‰æ‹©åˆ†ææ—¥æœŸ")},m=async e=>{s.value?.ä»£ç !==e.ä»£ç &&(s.value=e,await _(e.ä»£ç ))},k=e=>{e&&m(e)},_=async t=>{try{o.value=!0,console.log(`ğŸ”„ åŠ è½½è‚¡ç¥¨ ${t} Kçº¿æ•°æ®ï¼Œæ—¥æœŸ: ${e.value}`);const a=await Ke.Ay.getStockKline(t,30,e.value,"data");r.value=a.data?.data?.kline_data||[],console.log(`âœ… è·å– ${t} Kçº¿æ•°æ®: ${r.value.length} æ¡è®°å½•`)}catch(a){console.error(`âŒ è·å–è‚¡ç¥¨ ${t} Kçº¿æ•°æ®å¤±è´¥:`,a),r.value=[]}finally{o.value=!1}},v=e=>e>0?"up-color":e<0?"down-color":"neutral-color",b=()=>{console.log("å¯¼å‡ºæ•°æ®åŠŸèƒ½")},f=async()=>{try{const t=await Ke.Ay.getLatestMarketDate();t.success&&t.data.latest_date&&(e.value=t.data.latest_date,console.log(`ğŸ”§ DEBUG: è®¾ç½®æœ€æ–°å¯ç”¨æ—¥æœŸ: ${e.value}`))}catch(t){console.warn("è·å–æœ€æ–°å¸‚åœºæ—¥æœŸå¤±è´¥ï¼Œä½¿ç”¨å½“å‰æ—¥æœŸ:",t)}};return(0,n.wB)(e,(e,t)=>{e!==t&&s.value&&(console.log(`ğŸ“… æ—¥æœŸå˜åŒ–: ${t} â†’ ${e}ï¼Œé‡æ–°åŠ è½½Kçº¿æ•°æ®`),_(s.value.ä»£ç ))}),(0,n.sV)(async()=>{console.log("ğŸ”¥ æ–°é«˜è‚¡ç¥¨åˆ†æé¡µé¢æŒ‚è½½"),await f()}),{selectedDate:e,selectedPeriod:t,analyzing:a,stockList:l,selectedStock:s,loadingKline:o,klineData:r,klineOption:h,filterOptions:i,formatNumber:c,formatPercent:u,formatVolume:p,analyzeNewHigh:g,selectStock:m,handleStockSelect:k,loadKlineData:_,getChangeClass:v,exportData:b}}};const Ve=(0,h.A)(Ie,[["render",ye],["__scopeId","data-v-773dac01"]]);var $e=Ve;const Ye={class:"heima-analysis"},Re={class:"control-item"},We={class:"control-item"},Pe={class:"control-item"},Oe={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Xe={class:"price"},Be={class:"up-color"};function He(e,t,a,l,s,o){const r=(0,n.g2)("trading-date-picker"),i=(0,n.g2)("el-col"),c=(0,n.g2)("el-checkbox"),d=(0,n.g2)("Lightning"),u=(0,n.g2)("el-icon"),p=(0,n.g2)("el-button"),h=(0,n.g2)("el-row"),g=(0,n.g2)("el-card"),m=(0,n.g2)("el-text"),_=(0,n.g2)("el-table-column"),v=(0,n.g2)("el-tag"),b=(0,n.g2)("el-table"),f=(0,n.g2)("el-empty");return(0,n.uX)(),(0,n.CE)("div",Ye,[t[10]||(t[10]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ é»‘é©¬åˆ†æ"),(0,n.Lk)("p",null,"æ¶¨åœè‚¡ç¥¨åˆ†æï¼Œç‹¬ç«‹æ¨¡å—åŠ è½½")],-1)),(0,n.bF)(g,{class:"control-panel"},{default:(0,n.k6)(()=>[(0,n.bF)(h,{gutter:20,align:"middle"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Re,[t[3]||(t[3]=(0,n.Lk)("label",null,"é€‰æ‹©æ—¥æœŸ",-1)),(0,n.bF)(r,{modelValue:l.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedDate=e),placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",We,[t[6]||(t[6]=(0,n.Lk)("label",null,"è¿‡æ»¤é€‰é¡¹",-1)),(0,n.bF)(c,{modelValue:l.filterOptions.excludeST,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filterOptions.excludeST=e),style:{display:"block","margin-bottom":"8px"}},{default:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.eW)(" å»æ‰STè‚¡ç¥¨ ")])),_:1,__:[4]},8,["modelValue"]),(0,n.bF)(c,{modelValue:l.filterOptions.includeNonMainBoard,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filterOptions.includeNonMainBoard=e)},{default:(0,n.k6)(()=>t[5]||(t[5]=[(0,n.eW)(" åŒ…å«éä¸»æ¿è‚¡ç¥¨ ")])),_:1,__:[5]},8,["modelValue"])])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Pe,[t[8]||(t[8]=(0,n.Lk)("label",null,"Â ",-1)),(0,n.bF)(p,{type:"primary",onClick:l.analyzeHeima,loading:l.loading,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(d)]),_:1}),t[7]||(t[7]=(0,n.eW)(" åˆ†æé»‘é©¬è‚¡ç¥¨ "))]),_:1,__:[7]},8,["onClick","loading"])])]),_:1})]),_:1})]),_:1}),l.heimaData.limit_up_stocks?.length>0?((0,n.uX)(),(0,n.Wv)(g,{key:0},{header:(0,n.k6)(()=>[(0,n.Lk)("div",Oe,[(0,n.Lk)("span",null,"æ¶¨åœè‚¡ç¥¨åˆ—è¡¨ ("+(0,k.v_)(l.heimaData.total||0)+"åª)",1),(0,n.bF)(m,{type:"info",size:"small"},{default:(0,n.k6)(()=>t[9]||(t[9]=[(0,n.eW)(" ğŸ’¡ ç‚¹å‡»åˆ—å¤´å¯è¿›è¡Œæ’åºï¼Œé»˜è®¤æŒ‰è¿æ¿æƒ…å†µæ’åº ")])),_:1,__:[9]})])]),default:(0,n.k6)(()=>[(0,n.bF)(b,{data:l.heimaData.limit_up_stocks,stripe:"","default-sort":{prop:"è¿æ¿å¤©æ•°",order:"descending"}},{default:(0,n.k6)(()=>[(0,n.bF)(_,{prop:"åç§°",label:"è‚¡ç¥¨åç§°"}),(0,n.bF)(_,{prop:"ä»£ç ",label:"è‚¡ç¥¨ä»£ç "}),(0,n.bF)(_,{prop:"æ”¶ç›˜",label:"æ”¶ç›˜ä»·",align:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",Xe,(0,k.v_)(l.formatNumber(e.æ”¶ç›˜)),1)]),_:1}),(0,n.bF)(_,{prop:"æ¶¨è·Œå¹…",label:"æ¶¨è·Œå¹…",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",Be,(0,k.v_)(l.formatPercent(e.æ¶¨è·Œå¹…)),1)]),_:1}),(0,n.bF)(_,{prop:"æˆäº¤é¢",label:"æˆäº¤é¢",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",null,(0,k.v_)(l.formatAmount(e.æˆäº¤é¢)),1)]),_:1}),(0,n.bF)(_,{prop:"æ¢æ‰‹ç‡",label:"æ¢æ‰‹ç‡",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",null,(0,k.v_)(l.formatPercent(e.æ¢æ‰‹ç‡)),1)]),_:1}),(0,n.bF)(_,{prop:"è¿æ¿å¤©æ•°",label:"è¿æ¿æƒ…å†µ",align:"center",sortable:"","sort-method":l.sortByConsecutiveDays},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(v,{type:l.getConsecutiveTagType(e.è¿æ¿å¤©æ•°)},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.è¿æ¿å¤©æ•°||"é¦–æ¿"),1)]),_:2},1032,["type"])]),_:1},8,["sort-method"]),(0,n.bF)(_,{prop:"5æ—¥æ¶¨è·Œå¹…",label:"5æ—¥æ¶¨è·Œå¹…",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(e["5æ—¥æ¶¨è·Œå¹…"]>=0?"up-color":"down-color")},(0,k.v_)(l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…"])),3)]),_:1}),(0,n.bF)(_,{prop:"10æ—¥æ¶¨è·Œå¹…",label:"10æ—¥æ¶¨è·Œå¹…",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(e["10æ—¥æ¶¨è·Œå¹…"]>=0?"up-color":"down-color")},(0,k.v_)(l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…"])),3)]),_:1})]),_:1},8,["data"])]),_:1})):l.loading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(f,{key:1,description:"è¯·é€‰æ‹©æ—¥æœŸå¹¶ç‚¹å‡»åˆ†ææŒ‰é’®"}))])}var Ne=a(163),Ue={name:"HeimaAnalysis",components:{TradingDatePicker:Te.A},setup(){const e=(0,d.KR)((new Date).toISOString().split("T")[0]),t=(0,d.KR)(!1),a=(0,d.KR)({}),l=(0,d.KR)({excludeST:!0,includeNonMainBoard:!1}),s=async()=>{if(e.value)try{t.value=!0;const n=await Ke.Ay.getHeimaAnalysis(e.value,l.value);n&&n.success&&n.data?(a.value={limit_up_stocks:n.data,total:n.data.length},console.log("ğŸ é»‘é©¬åˆ†ææˆåŠŸï¼Œè·å¾—",n.data.length,"åªæ¶¨åœè‚¡ç¥¨")):(a.value={limit_up_stocks:[],total:0},Ne.nk.warning("æœªæ‰¾åˆ°æ¶¨åœè‚¡ç¥¨æ•°æ®"))}catch(n){console.error("é»‘é©¬åˆ†æå¤±è´¥:",n),Ne.nk.error("é»‘é©¬åˆ†æå¤±è´¥: "+n.message),a.value={limit_up_stocks:[],total:0}}finally{t.value=!1}else Ne.nk.warning("è¯·é€‰æ‹©åˆ†ææ—¥æœŸ")},o=e=>Ke.Wp.formatNumber(e),r=e=>Ke.Wp.formatPercent(e),i=e=>Ke.Wp.formatAmount(e),c=e=>{if(!e)return"info";const t=e=>{if(e.includes("é¦–æ¿"))return 1;const t=e.match(/(\d+)æ¿/);return t?parseInt(t[1]):0},a=t(e.toString());return a>=5?"danger":a>=3?"warning":a>=2?"success":"info"},u=(e,t)=>{const a=e=>{if(!e)return 0;if(e.includes("é¦–æ¿"))return 1;const t=e.match(/(\d+)æ¿/);return t?parseInt(t[1]):0},l=a(e.è¿æ¿å¤©æ•°),n=a(t.è¿æ¿å¤©æ•°);return n-l},p=async()=>{try{const t=await Ke.Ay.getLatestMarketDate();t.success&&t.data.latest_date&&(e.value=t.data.latest_date,console.log(`ğŸ”§ DEBUG: è®¾ç½®æœ€æ–°å¯ç”¨æ—¥æœŸ: ${e.value}`))}catch(t){console.warn("è·å–æœ€æ–°å¸‚åœºæ—¥æœŸå¤±è´¥ï¼Œä½¿ç”¨å½“å‰æ—¥æœŸ:",t)}};return(0,n.sV)(async()=>{console.log("ğŸ é»‘é©¬åˆ†æé¡µé¢æŒ‚è½½"),await p()}),{selectedDate:e,loading:t,heimaData:a,filterOptions:l,analyzeHeima:s,formatNumber:o,formatPercent:r,formatAmount:i,getConsecutiveTagType:c,sortByConsecutiveDays:u}}};const je=(0,h.A)(Ue,[["render",He],["__scopeId","data-v-7c6b886a"]]);var ze=je;const Ge={class:"baima-analysis"},qe={class:"control-item"},Qe={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},Ze={class:"control-item"},Je={class:"control-item"},et={class:"control-item"},tt={class:"control-item"},at={style:{display:"flex","flex-wrap":"wrap",gap:"8px"}},lt={style:{display:"flex","justify-content":"space-between","align-items":"center"}},nt={key:0},st={key:1,style:{color:"#909399"}},ot={key:1};function rt(e,t,a,l,s,o){const r=(0,n.g2)("el-checkbox"),i=(0,n.g2)("el-col"),c=(0,n.g2)("el-option"),d=(0,n.g2)("el-select"),u=(0,n.g2)("el-date-picker"),p=(0,n.g2)("el-input"),h=(0,n.g2)("el-button"),g=(0,n.g2)("el-row"),m=(0,n.g2)("Star"),_=(0,n.g2)("el-icon"),v=(0,n.g2)("el-tag"),b=(0,n.g2)("el-card"),f=(0,n.g2)("el-statistic"),y=(0,n.g2)("Search"),C=(0,n.g2)("el-table-column"),w=(0,n.g2)("el-table"),F=(0,n.g2)("el-empty");return(0,n.uX)(),(0,n.CE)("div",Ge,[t[16]||(t[16]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ´ ç™½é©¬åˆ†æ"),(0,n.Lk)("p",null,"ç™½é©¬è‚¡ç¥¨å¤šæ—¶é—´åŒºé—´æ¶¨è·Œå¹…åˆ†æï¼Œæ”¯æŒæ’åºå’Œç­›é€‰")],-1)),(0,n.bF)(b,{class:"control-panel"},{default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20,align:"middle"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",qe,[t[9]||(t[9]=(0,n.Lk)("label",null,"è‚¡ç¥¨ç­›é€‰",-1)),(0,n.Lk)("div",Qe,[(0,n.bF)(r,{modelValue:l.filterOptions.includeST,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filterOptions.includeST=e)},{default:(0,n.k6)(()=>t[7]||(t[7]=[(0,n.eW)("åŒ…å«STè‚¡ç¥¨")])),_:1,__:[7]},8,["modelValue"]),(0,n.bF)(r,{modelValue:l.filterOptions.includeNonMainBoard,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filterOptions.includeNonMainBoard=e)},{default:(0,n.k6)(()=>t[8]||(t[8]=[(0,n.eW)("åŒ…å«éä¸»æ¿è‚¡ç¥¨")])),_:1,__:[8]},8,["modelValue"])])])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Ze,[t[10]||(t[10]=(0,n.Lk)("label",null,"å¿«é€Ÿæ—¶é—´åŒºé—´",-1)),(0,n.bF)(d,{modelValue:l.selectedQuickIntervals,"onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedQuickIntervals=e),multiple:"",placeholder:"é€‰æ‹©å¿«é€ŸåŒºé—´",style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(c,{label:"æœ€è¿‘30å¤©",value:"30d"}),(0,n.bF)(c,{label:"æœ€è¿‘90å¤©",value:"90d"}),(0,n.bF)(c,{label:"æœ¬å¹´åº¦",value:"ytd"}),(0,n.bF)(c,{label:"æœ€è¿‘6ä¸ªæœˆ",value:"6m"})]),_:1},8,["modelValue"])])]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Je,[t[12]||(t[12]=(0,n.Lk)("label",null,"è‡ªå®šä¹‰æ—¶é—´åŒºé—´",-1)),(0,n.bF)(g,{gutter:10},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:l.customInterval.startDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.customInterval.startDate=e),type:"date",placeholder:"å¼€å§‹æ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:l.customInterval.endDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.customInterval.endDate=e),type:"date",placeholder:"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:l.customInterval.name,"onUpdate:modelValue":t[5]||(t[5]=e=>l.customInterval.name=e),placeholder:"åŒºé—´åç§°",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(h,{onClick:l.addCustomInterval,disabled:!l.canAddCustomInterval,style:{width:"100%"}},{default:(0,n.k6)(()=>t[11]||(t[11]=[(0,n.eW)(" æ·»åŠ åŒºé—´ ")])),_:1,__:[11]},8,["onClick","disabled"])]),_:1})]),_:1})])]),_:1}),(0,n.bF)(i,{span:4},{default:(0,n.k6)(()=>[(0,n.Lk)("div",et,[t[14]||(t[14]=(0,n.Lk)("label",null,"Â ",-1)),(0,n.bF)(h,{type:"primary",onClick:l.analyzeBaima,loading:l.loading,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(m)]),_:1}),t[13]||(t[13]=(0,n.eW)(" åˆ†æç™½é©¬è‚¡ç¥¨ "))]),_:1,__:[13]},8,["onClick","loading"])])]),_:1})]),_:1}),l.customIntervals.length>0?((0,n.uX)(),(0,n.Wv)(g,{key:0,style:{"margin-top":"15px"}},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:24},{default:(0,n.k6)(()=>[(0,n.Lk)("div",tt,[t[15]||(t[15]=(0,n.Lk)("label",null,"å·²æ·»åŠ çš„æ—¶é—´åŒºé—´",-1)),(0,n.Lk)("div",at,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.customIntervals,(e,t)=>((0,n.uX)(),(0,n.Wv)(v,{key:t,closable:"",onClose:e=>l.removeCustomInterval(t),type:"info"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.name)+" ("+(0,k.v_)(e.start_date)+" è‡³ "+(0,k.v_)(e.end_date)+") ",1)]),_:2},1032,["onClose"]))),128))])])]),_:1})]),_:1})):(0,n.Q3)("",!0)]),_:1}),l.baimaData.stocks?.length>0?((0,n.uX)(),(0,n.Wv)(b,{key:0,class:"stats-panel"},{default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(f,{title:"è‚¡ç¥¨æ€»æ•°",value:l.baimaData.total_count||0},null,8,["value"])]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(f,{title:"æ—¶é—´åŒºé—´",value:l.baimaData.intervals?.length||0},null,8,["value"])]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(f,{title:"æ¶¨è·Œå¹…åˆ—",value:l.baimaData.change_columns?.length||0},null,8,["value"])]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0),l.baimaData.stocks?.length>0?((0,n.uX)(),(0,n.Wv)(b,{key:1},{header:(0,n.k6)(()=>[(0,n.Lk)("div",lt,[(0,n.Lk)("span",null,"ç™½é©¬è‚¡ç¥¨åˆ—è¡¨ ("+(0,k.v_)(l.baimaData.stocks.length)+"åª)",1),(0,n.bF)(p,{modelValue:l.searchText,"onUpdate:modelValue":t[6]||(t[6]=e=>l.searchText=e),placeholder:"æœç´¢è‚¡ç¥¨åç§°æˆ–ä»£ç ",style:{width:"200px"},clearable:""},{prefix:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(y)]),_:1})]),_:1},8,["modelValue"])])]),default:(0,n.k6)(()=>[(0,n.bF)(w,{data:l.filteredStocks,stripe:"","default-sort":{prop:l.defaultSortColumn,order:"descending"},style:{width:"100%"},height:"600"},{default:(0,n.k6)(()=>[(0,n.bF)(C,{prop:"ä»£ç ",label:"ä»£ç ",width:"80",fixed:"left"}),(0,n.bF)(C,{prop:"åç§°",label:"åç§°",width:"120",fixed:"left"}),(0,n.bF)(C,{prop:"è¡Œä¸š",label:"è¡Œä¸š",width:"150","show-overflow-tooltip":"",sortable:""},{default:(0,n.k6)(({row:e})=>[e.è¡Œä¸š?((0,n.uX)(),(0,n.CE)("span",nt,(0,k.v_)(e.è¡Œä¸š),1)):((0,n.uX)(),(0,n.CE)("span",st,"-"))]),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.baimaData.change_columns,e=>((0,n.uX)(),(0,n.Wv)(C,{key:e,prop:e,label:e.replace("æ¶¨è·Œå¹…",""),width:"120",align:"right",sortable:""},{default:(0,n.k6)(({row:t})=>[null!==t[e]&&void 0!==t[e]?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,k.C4)(l.getChangeClass(t[e]))},(0,k.v_)(l.formatPercent(t[e])),3)):((0,n.uX)(),(0,n.CE)("span",ot,"-"))]),_:2},1032,["prop","label"]))),128))]),_:1},8,["data","default-sort"])]),_:1})):l.loading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(F,{key:2,description:"è¯·è®¾ç½®ç­›é€‰æ¡ä»¶å¹¶ç‚¹å‡»åˆ†ææŒ‰é’®"}))])}var it=a(8548),ct={name:"BaimaAnalysis",components:{Star:it.Star,Search:it.Search},setup(){const e=(0,d.KR)(!1),t=(0,d.KR)({}),a=(0,d.KR)(""),l=(0,d.KR)(["30d","90d"]),s=(0,d.KR)({includeST:!1,includeNonMainBoard:!1}),o=(0,d.KR)({startDate:"",endDate:"",name:""}),r=(0,d.KR)([]),i=(0,n.EW)(()=>t.value.change_columns&&t.value.change_columns.length>0?t.value.change_columns[0]:""),c=(0,n.EW)(()=>o.value.startDate&&o.value.endDate&&o.value.name.trim()),u=(0,n.EW)(()=>{if(!t.value.stocks)return[];if(!a.value)return t.value.stocks;const e=a.value.toLowerCase();return t.value.stocks.filter(t=>t.åç§°&&t.åç§°.toLowerCase().includes(e)||t.ä»£ç &&t.ä»£ç .toLowerCase().includes(e))}),p=()=>{c.value&&(r.value.push({start_date:o.value.startDate,end_date:o.value.endDate,name:o.value.name.trim()}),o.value={startDate:"",endDate:"",name:""})},h=e=>{r.value.splice(e,1)},g=()=>{const e=[],t=new Date;return l.value.forEach(a=>{let l,n,s;switch(a){case"30d":l=new Date(t.getTime()-2592e6),n=t,s="æœ€è¿‘30å¤©";break;case"90d":l=new Date(t.getTime()-7776e6),n=t,s="æœ€è¿‘90å¤©";break;case"6m":l=new Date(t.getTime()-15552e6),n=t,s="æœ€è¿‘6ä¸ªæœˆ";break;case"ytd":l=new Date(t.getFullYear(),0,1),n=t,s="æœ¬å¹´åº¦";break}l&&n&&e.push({start_date:l.toISOString().split("T")[0],end_date:n.toISOString().split("T")[0],name:s})}),r.value.forEach(t=>{e.push({start_date:t.start_date,end_date:t.end_date,name:t.name})}),e},m=async()=>{const a=g();if(0!==a.length)try{e.value=!0;const l={intervals:a,min_market_cap:1,exclude_st:!s.value.includeST,include_main_board:!0,include_kcb_cyb:!0,include_bjs:!0,include_non_main_board:s.value.includeNonMainBoard};console.log("ğŸ´ å‘é€ç™½é©¬åˆ†æè¯·æ±‚:",l);const n=await Ke.Ay.postBaimaAnalysis(l);if(n&&n.success&&n.data){const e=n.data;if(e.error)Ne.nk.error("ç™½é©¬åˆ†æå¤±è´¥: "+e.error),t.value={};else{if(t.value=e,console.log("ğŸ´ ç™½é©¬åˆ†ææˆåŠŸï¼Œè·å¾—",e.total_count||0,"åªè‚¡ç¥¨"),e.stocks&&e.stocks.length>0){const t=e.stocks[0];console.log("ğŸ”§ DEBUG å‰ç«¯: ç¤ºä¾‹è‚¡ç¥¨å­—æ®µ:",Object.keys(t)),console.log("ğŸ”§ DEBUG å‰ç«¯: ç¤ºä¾‹è‚¡ç¥¨æ•°æ®:",t),t.è¡Œä¸š?console.log("ğŸ”§ DEBUG å‰ç«¯: è¡Œä¸šå­—æ®µå€¼:",t.è¡Œä¸š):console.log("ğŸ”§ DEBUG å‰ç«¯: âŒ ç¼ºå°‘è¡Œä¸šå­—æ®µ")}Ne.nk.success(`åˆ†æå®Œæˆï¼Œæ‰¾åˆ° ${e.total_count||0} åªç™½é©¬è‚¡ç¥¨`)}}else t.value={},Ne.nk.warning("æœªæ‰¾åˆ°ç™½é©¬åˆ†ææ•°æ®")}catch(l){console.error("ç™½é©¬åˆ†æå¤±è´¥:",l),Ne.nk.error("ç™½é©¬åˆ†æå¤±è´¥: "+l.message),t.value={}}finally{e.value=!1}else Ne.nk.warning("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ—¶é—´åŒºé—´æˆ–æ·»åŠ è‡ªå®šä¹‰æ—¶é—´åŒºé—´")},k=e=>null===e||void 0===e?"-":(e>=0?"+":"")+e.toFixed(2)+"%",_=e=>null===e||void 0===e?"":e>=0?"up-color":"down-color";return(0,n.sV)(()=>{console.log("ğŸ´ ç™½é©¬åˆ†æé¡µé¢æŒ‚è½½")}),{loading:e,baimaData:t,searchText:a,selectedQuickIntervals:l,filterOptions:s,customInterval:o,customIntervals:r,canAddCustomInterval:c,defaultSortColumn:i,filteredStocks:u,addCustomInterval:p,removeCustomInterval:h,analyzeBaima:m,formatPercent:k,getChangeClass:_}}};const dt=(0,h.A)(ct,[["render",rt],["__scopeId","data-v-19969241"]]);var ut=dt;const pt={class:"money-effect"},ht={class:"control-item"},gt={class:"control-item"},mt={class:"control-item"},kt={class:"control-item"},_t={key:0},vt={class:"stat-item"},bt={class:"stat-value positive"},ft={class:"stat-item"},yt={class:"stat-value negative"},Ct={class:"stat-item"},wt={class:"stat-value positive"},Ft={class:"stat-item"},Dt={class:"stat-value positive"},Lt={class:"stat-item"},xt={class:"stat-value positive"},St={class:"stat-item"},Et={class:"stat-value negative"},Mt={class:"stat-item"},At={class:"stat-value positive"},Kt={class:"stat-item"},Tt={class:"stat-value positive"},It={key:1},Vt={class:"card-header"},$t={class:"kline-container"},Yt={key:0,class:"kline-header"},Rt={class:"stock-info"},Wt={class:"info-item"},Pt={class:"info-item"},Ot={class:"info-item"},Xt={key:1,class:"loading-container"},Bt={key:2,class:"kline-chart"},Ht={key:3,class:"no-selection"},Nt={key:4,class:"no-data"},Ut={class:"card-header"},jt={class:"kline-container"},zt={key:0,class:"kline-header"},Gt={class:"stock-info"},qt={class:"info-item"},Qt={class:"info-item"},Zt={class:"info-item"},Jt={key:1,class:"loading-container"},ea={key:2,class:"kline-chart"},ta={key:3,class:"no-selection"},aa={key:4,class:"no-data"};function la(e,t,a,l,s,o){const r=(0,n.g2)("trading-date-picker"),i=(0,n.g2)("el-col"),c=(0,n.g2)("el-checkbox"),d=(0,n.g2)("TrendCharts"),u=(0,n.g2)("el-icon"),p=(0,n.g2)("el-button"),h=(0,n.g2)("Refresh"),g=(0,n.g2)("el-row"),m=(0,n.g2)("el-card"),_=(0,n.g2)("Download"),v=(0,n.g2)("el-table-column"),b=(0,n.g2)("QuestionFilled"),f=(0,n.g2)("el-tooltip"),y=(0,n.g2)("el-table"),C=(0,n.g2)("Loading"),w=(0,n.g2)("v-chart"),F=(0,n.g2)("Warning"),D=(0,n.g2)("el-tag"),L=(0,n.g2)("el-empty");return(0,n.uX)(),(0,n.CE)("div",pt,[t[42]||(t[42]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ’° èµšäºé’±æ•ˆåº”åˆ†æ"),(0,n.Lk)("p",{class:"page-description"},"åˆ†æå½“æ—¥æœ€ä½ç‚¹åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼ˆèµšé’±æ•ˆåº”ï¼‰å’Œæœ€é«˜ç‚¹åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼ˆäºé’±æ•ˆåº”ï¼‰ï¼Œæ”¯æŒå…¨éƒ¨ä¸ªè‚¡å’Œè¿‘æœŸå¼ºåŠ¿è‚¡ï¼ˆæ›¾3æ¿ä»¥ä¸Šï¼‰ä¸¤ç§æ¨¡å¼")],-1)),(0,n.bF)(m,{class:"control-panel"},{default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20,align:"middle"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ht,[t[5]||(t[5]=(0,n.Lk)("label",null,"é€‰æ‹©æ—¥æœŸ",-1)),(0,n.bF)(r,{modelValue:l.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedDate=e),placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",gt,[t[8]||(t[8]=(0,n.Lk)("label",null,"è¿‡æ»¤é€‰é¡¹",-1)),(0,n.bF)(c,{modelValue:l.filterOptions.excludeST,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filterOptions.excludeST=e),style:{display:"block","margin-bottom":"8px"}},{default:(0,n.k6)(()=>t[6]||(t[6]=[(0,n.eW)(" å»æ‰STå’Œé€€å¸‚è‚¡ç¥¨ ")])),_:1,__:[6]},8,["modelValue"]),(0,n.bF)(c,{modelValue:l.filterOptions.includeNonMainBoard,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filterOptions.includeNonMainBoard=e)},{default:(0,n.k6)(()=>t[7]||(t[7]=[(0,n.eW)(" åŒ…å«éä¸»æ¿è‚¡ç¥¨ ")])),_:1,__:[7]},8,["modelValue"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",mt,[t[10]||(t[10]=(0,n.Lk)("label",null,"Â ",-1)),(0,n.bF)(p,{type:"primary",onClick:l.analyzeMoneyEffect,loading:l.analyzing,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(d)]),_:1}),t[9]||(t[9]=(0,n.eW)(" åˆ†ææ•ˆåº” "))]),_:1,__:[9]},8,["onClick","loading"])])]),_:1}),(0,n.bF)(i,{xs:24,sm:8,md:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",kt,[t[12]||(t[12]=(0,n.Lk)("label",null,"Â ",-1)),(0,n.bF)(p,{type:"success",onClick:l.refreshData,loading:l.refreshing,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(h)]),_:1}),t[11]||(t[11]=(0,n.eW)(" åˆ·æ–°æ•°æ® "))]),_:1,__:[11]},8,["onClick","loading"])])]),_:1})]),_:1})]),_:1}),l.allStatsData||l.strongStatsData?((0,n.uX)(),(0,n.CE)("div",_t,[l.allStatsData?((0,n.uX)(),(0,n.Wv)(m,{key:0,class:"stats-panel",style:{"margin-bottom":"15px"}},{header:(0,n.k6)(()=>t[13]||(t[13]=[(0,n.Lk)("span",null,"ğŸ“Š å…¨éƒ¨è‚¡ç¥¨ç»Ÿè®¡",-1)])),default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",vt,[(0,n.Lk)("div",bt,(0,k.v_)(l.allStatsData.avgLowToClose)+"%",1),t[14]||(t[14]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡èµšé’±æ•ˆåº”",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ft,[(0,n.Lk)("div",yt,(0,k.v_)(l.allStatsData.avgHighToClose)+"%",1),t[15]||(t[15]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡äºé’±æ•ˆåº”",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Ct,[(0,n.Lk)("div",wt,(0,k.v_)(l.allStatsData.avg5DayChange)+"%",1),t[16]||(t[16]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡5æ—¥æ¶¨è·Œå¹…",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Ft,[(0,n.Lk)("div",Dt,(0,k.v_)(l.allStatsData.avg10DayChange)+"%",1),t[17]||(t[17]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡10æ—¥æ¶¨è·Œå¹…",-1))])]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0),l.strongStatsData?((0,n.uX)(),(0,n.Wv)(m,{key:1,class:"stats-panel",style:{"margin-bottom":"15px"}},{header:(0,n.k6)(()=>t[18]||(t[18]=[(0,n.Lk)("span",null,"ğŸš€ å¼ºåŠ¿è‚¡ç»Ÿè®¡",-1)])),default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Lt,[(0,n.Lk)("div",xt,(0,k.v_)(l.strongStatsData.avgLowToClose)+"%",1),t[19]||(t[19]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡èµšé’±æ•ˆåº”",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",St,[(0,n.Lk)("div",Et,(0,k.v_)(l.strongStatsData.avgHighToClose)+"%",1),t[20]||(t[20]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡äºé’±æ•ˆåº”",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Mt,[(0,n.Lk)("div",At,(0,k.v_)(l.allStatsData.avg5DayChange)+"%",1),t[21]||(t[21]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡5æ—¥æ¶¨è·Œå¹…",-1))])]),_:1}),(0,n.bF)(i,{xs:12,sm:6},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Kt,[(0,n.Lk)("div",Tt,(0,k.v_)(l.strongStatsData.avg10DayChange)+"%",1),t[22]||(t[22]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡10æ—¥æ¶¨è·Œå¹…",-1))])]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),l.allStocksList.length>0||l.strongStocksList.length>0?((0,n.uX)(),(0,n.CE)("div",It,[l.allStocksList.length>0?((0,n.uX)(),(0,n.Wv)(m,{key:0,class:"stock-list-card",style:{"margin-bottom":"20px"}},{header:(0,n.k6)(()=>[(0,n.Lk)("div",Vt,[t[24]||(t[24]=(0,n.Lk)("span",null,"ğŸ“Š èµšäºé’±æ•ˆåº”",-1)),(0,n.Lk)("div",null,[(0,n.bF)(p,{type:"text",onClick:t[3]||(t[3]=e=>l.exportData("all"))},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(_)]),_:1}),t[23]||(t[23]=(0,n.eW)(" å¯¼å‡ºå…¨éƒ¨è‚¡ç¥¨æ•°æ® "))]),_:1,__:[23]})])])]),default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:14},{default:(0,n.k6)(()=>[(0,n.bF)(y,{data:l.allStocksList,stripe:"","highlight-current-row":"",onCurrentChange:l.handleStockSelect,style:{width:"100%"},"max-height":"500"},{default:(0,n.k6)(()=>[(0,n.bF)(v,{prop:"åç§°",label:"åç§°",width:"100",fixed:"left"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(p,{type:"text",onClick:t=>l.selectStock(e)},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.åç§°),1)]),_:2},1032,["onClick"])]),_:1}),(0,n.bF)(v,{prop:"ä»£ç ",label:"ä»£ç ",width:"80"}),(0,n.bF)(v,{width:"120",align:"right",sortable:"",prop:"æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…"},{header:(0,n.k6)(()=>[t[25]||(t[25]=(0,n.Lk)("span",null,"èµšé’±æ•ˆåº”",-1)),(0,n.bF)(f,{content:"å½“æ—¥æœ€ä½ä»·åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼Œåæ˜ è‚¡ç¥¨çš„èµšé’±æ•ˆåº”",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{style:{"margin-left":"4px",color:"#909399",cursor:"help"}},{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1})]),_:1})]),default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(e.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),_:1}),(0,n.bF)(v,{width:"120",align:"right",sortable:"",prop:"æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…"},{header:(0,n.k6)(()=>[t[26]||(t[26]=(0,n.Lk)("span",null,"äºé’±æ•ˆåº”",-1)),(0,n.bF)(f,{content:"å½“æ—¥æœ€é«˜ä»·åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼Œåæ˜ è‚¡ç¥¨çš„äºé’±æ•ˆåº”",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{style:{"margin-left":"4px",color:"#909399",cursor:"help"}},{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1})]),_:1})]),default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(e.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),_:1}),(0,n.bF)(v,{prop:"å½“æ—¥æ¶¨è·Œå¹…",label:"å½“æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.å½“æ—¥æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(e.å½“æ—¥æ¶¨è·Œå¹…)),3)]),_:1}),(0,n.bF)(v,{prop:"5æ—¥æ¶¨è·Œå¹…",label:"5æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["5æ—¥æ¶¨è·Œå¹…"]))},(0,k.v_)(l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…"])),3)]),_:1}),(0,n.bF)(v,{prop:"10æ—¥æ¶¨è·Œå¹…",label:"10æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["10æ—¥æ¶¨è·Œå¹…"]))},(0,k.v_)(l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…"])),3)]),_:1})]),_:1},8,["data","onCurrentChange"])]),_:1}),(0,n.bF)(i,{span:10},{default:(0,n.k6)(()=>[(0,n.Lk)("div",$t,[l.selectedStock?((0,n.uX)(),(0,n.CE)("div",Yt,[(0,n.Lk)("h4",null,(0,k.v_)(l.selectedStock.åç§°)+" ("+(0,k.v_)(l.selectedStock.ä»£ç )+") Kçº¿å›¾",1),(0,n.Lk)("div",Rt,[(0,n.Lk)("span",Wt,[t[27]||(t[27]=(0,n.eW)("èµšé’±æ•ˆåº”: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),(0,n.Lk)("span",Pt,[t[28]||(t[28]=(0,n.eW)("äºé’±æ•ˆåº”: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),(0,n.Lk)("span",Ot,[t[29]||(t[29]=(0,n.eW)("å½“æ—¥æ¶¨è·Œå¹…: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.å½“æ—¥æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.å½“æ—¥æ¶¨è·Œå¹…)),3)])])])):(0,n.Q3)("",!0),l.klineLoading?((0,n.uX)(),(0,n.CE)("div",Xt,[(0,n.bF)(u,{class:"is-loading"},{default:(0,n.k6)(()=>[(0,n.bF)(C)]),_:1}),t[30]||(t[30]=(0,n.Lk)("span",null,"åŠ è½½Kçº¿å›¾ä¸­...",-1))])):l.selectedStock&&l.klineData.length>0?((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.bF)(w,{option:l.klineOption,style:{height:"400px",width:"100%"},autoresize:""},null,8,["option"])])):l.selectedStock?((0,n.uX)(),(0,n.CE)("div",Nt,[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(F)]),_:1}),t[32]||(t[32]=(0,n.Lk)("p",null,"æš‚æ— Kçº¿å›¾æ•°æ®",-1))])):((0,n.uX)(),(0,n.CE)("div",Ht,[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(d)]),_:1}),t[31]||(t[31]=(0,n.Lk)("p",null,"ç‚¹å‡»å·¦ä¾§è‚¡ç¥¨åç§°æŸ¥çœ‹Kçº¿å›¾",-1))]))])]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0),l.strongStocksList.length>0?((0,n.uX)(),(0,n.Wv)(m,{key:1,class:"stock-list-card",style:{"margin-bottom":"20px"}},{header:(0,n.k6)(()=>[(0,n.Lk)("div",Ut,[(0,n.Lk)("span",null,"ğŸš€ è¿‘æœŸå¼ºåŠ¿è‚¡èµšäºé’±æ•ˆåº”ï¼ˆæ›¾3æ¿ä»¥ä¸Šï¼‰ - "+(0,k.v_)(l.strongStocksList.length)+"åª",1),(0,n.Lk)("div",null,[(0,n.bF)(p,{type:"text",onClick:t[4]||(t[4]=e=>l.exportData("strong"))},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(_)]),_:1}),t[33]||(t[33]=(0,n.eW)(" å¯¼å‡ºå¼ºåŠ¿è‚¡æ•°æ® "))]),_:1,__:[33]})])])]),default:(0,n.k6)(()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:14},{default:(0,n.k6)(()=>[(0,n.bF)(y,{data:l.strongStocksList,stripe:"","highlight-current-row":"",onCurrentChange:l.handleStockSelect,style:{width:"100%"},"max-height":"400"},{default:(0,n.k6)(()=>[(0,n.bF)(v,{prop:"åç§°",label:"åç§°",width:"100",fixed:"left"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(p,{type:"text",onClick:t=>l.selectStock(e)},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.åç§°),1)]),_:2},1032,["onClick"])]),_:1}),(0,n.bF)(v,{prop:"ä»£ç ",label:"ä»£ç ",width:"80"}),(0,n.bF)(v,{prop:"å†å²æœ€é«˜è¿æ¿",label:"å†å²æœ€é«˜è¿æ¿",width:"100",align:"center",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(D,{type:"warning"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.å†å²æœ€é«˜è¿æ¿)+"æ¿ ",1)]),_:2},1024)]),_:1}),(0,n.bF)(v,{width:"120",align:"right",sortable:"",prop:"æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…"},{header:(0,n.k6)(()=>[t[34]||(t[34]=(0,n.Lk)("span",null,"èµšé’±æ•ˆåº”",-1)),(0,n.bF)(f,{content:"å½“æ—¥æœ€ä½ä»·åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼Œåæ˜ è‚¡ç¥¨çš„èµšé’±æ•ˆåº”",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{style:{"margin-left":"4px",color:"#909399",cursor:"help"}},{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1})]),_:1})]),default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(e.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),_:1}),(0,n.bF)(v,{width:"120",align:"right",sortable:"",prop:"æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…"},{header:(0,n.k6)(()=>[t[35]||(t[35]=(0,n.Lk)("span",null,"äºé’±æ•ˆåº”",-1)),(0,n.bF)(f,{content:"å½“æ—¥æœ€é«˜ä»·åˆ°æ”¶ç›˜ä»·çš„æ¶¨è·Œå¹…ï¼Œåæ˜ è‚¡ç¥¨çš„äºé’±æ•ˆåº”",placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{style:{"margin-left":"4px",color:"#909399",cursor:"help"}},{default:(0,n.k6)(()=>[(0,n.bF)(b)]),_:1})]),_:1})]),default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(e.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),_:1}),(0,n.bF)(v,{prop:"å½“æ—¥æ¶¨è·Œå¹…",label:"å½“æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e.å½“æ—¥æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(e.å½“æ—¥æ¶¨è·Œå¹…)),3)]),_:1}),(0,n.bF)(v,{prop:"5æ—¥æ¶¨è·Œå¹…",label:"5æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["5æ—¥æ¶¨è·Œå¹…"]))},(0,k.v_)(l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…"])),3)]),_:1}),(0,n.bF)(v,{prop:"10æ—¥æ¶¨è·Œå¹…",label:"10æ—¥æ¶¨è·Œå¹…",width:"100",align:"right",sortable:""},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(e["10æ—¥æ¶¨è·Œå¹…"]))},(0,k.v_)(l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…"])),3)]),_:1})]),_:1},8,["data","onCurrentChange"])]),_:1}),(0,n.bF)(i,{span:10},{default:(0,n.k6)(()=>[(0,n.Lk)("div",jt,[l.selectedStock?((0,n.uX)(),(0,n.CE)("div",zt,[(0,n.Lk)("h4",null,(0,k.v_)(l.selectedStock.åç§°)+" ("+(0,k.v_)(l.selectedStock.ä»£ç )+") Kçº¿å›¾",1),(0,n.Lk)("div",Gt,[(0,n.Lk)("span",qt,[t[36]||(t[36]=(0,n.eW)("èµšé’±æ•ˆåº”: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),(0,n.Lk)("span",Qt,[t[37]||(t[37]=(0,n.eW)("äºé’±æ•ˆåº”: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.æœ€é«˜åˆ°æ”¶ç›˜æ¶¨å¹…)),3)]),(0,n.Lk)("span",Zt,[t[38]||(t[38]=(0,n.eW)("å½“æ—¥æ¶¨è·Œå¹…: ")),(0,n.Lk)("span",{class:(0,k.C4)(l.getChangeClass(l.selectedStock.å½“æ—¥æ¶¨è·Œå¹…))},(0,k.v_)(l.formatPercent(l.selectedStock.å½“æ—¥æ¶¨è·Œå¹…)),3)])])])):(0,n.Q3)("",!0),l.klineLoading?((0,n.uX)(),(0,n.CE)("div",Jt,[(0,n.bF)(u,{class:"is-loading"},{default:(0,n.k6)(()=>[(0,n.bF)(C)]),_:1}),t[39]||(t[39]=(0,n.Lk)("span",null,"åŠ è½½Kçº¿å›¾ä¸­...",-1))])):l.selectedStock&&l.klineData.length>0?((0,n.uX)(),(0,n.CE)("div",ea,[(0,n.bF)(w,{option:l.klineOption,style:{height:"400px",width:"100%"},autoresize:""},null,8,["option"])])):l.selectedStock?((0,n.uX)(),(0,n.CE)("div",aa,[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(F)]),_:1}),t[41]||(t[41]=(0,n.Lk)("p",null,"æš‚æ— Kçº¿å›¾æ•°æ®",-1))])):((0,n.uX)(),(0,n.CE)("div",ta,[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[(0,n.bF)(d)]),_:1}),t[40]||(t[40]=(0,n.Lk)("p",null,"ç‚¹å‡»å·¦ä¾§è‚¡ç¥¨åç§°æŸ¥çœ‹Kçº¿å›¾",-1))]))])]),_:1})]),_:1})]),_:1})):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),l.analyzing||0!==l.allStocksList.length||0!==l.strongStocksList.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(L,{key:2,description:"æš‚æ— æ•°æ®ï¼Œè¯·é€‰æ‹©æ—¥æœŸè¿›è¡Œåˆ†æ","image-size":200}))])}var na=a(4335),sa=a(6756),oa=a(9789);(0,Ce.Y)([we.a,De.a,Fe.a,sa.a,Le.a,xe.a,Se.a,Ee.a,Me.a,oa.a]);var ra={name:"MoneyEffect",components:{Search:it.Search,Download:it.Download,Refresh:it.Refresh,TrendCharts:it.TrendCharts,Loading:it.Loading,Warning:it.Warning,QuestionFilled:it.QuestionFilled,VChart:Ae.Ay,TradingDatePicker:Te.A},setup(){const e=(0,d.KR)((new Date).toISOString().split("T")[0]),t=(0,d.KR)(!1),a=(0,d.KR)(!1),l=(0,d.KR)([]),s=(0,d.KR)([]),o=(0,d.KR)(null),r=(0,d.KR)([]),i=(0,d.KR)(!1),c=(0,d.KR)(null),u=(0,d.KR)(null),p=(0,d.KR)({excludeST:!0,includeNonMainBoard:!1}),h="http://localhost:5000",g=(0,n.EW)(()=>Ke.Wp.formatNumber),m=(0,n.EW)(()=>Ke.Wp.formatPercent),k=(0,n.EW)(()=>Ke.Wp.formatVolume),_=(0,n.EW)(()=>{if(0===r.value.length)return{};const e=r.value.map(e=>e.date),t=r.value.map(e=>[e.open,e.close,e.low,e.high]),a=r.value.map(e=>{const t=e.amount||e.volume||0;return{value:t,itemStyle:{color:e.close>=e.open?"#ef232a":"#14b143"}}}),l=r.value.map(e=>e.ma5),n=r.value.map(e=>e.ma10),s=r.value.map(e=>e.ma20);return{animation:!1,color:["#4ECDC4","#ffbf00","#f92672"],title:{text:o.value?`${o.value.åç§°} (${o.value.ä»£ç })`:"Kçº¿å›¾",left:"center",textStyle:{color:"#333",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(e){let t=`${e[0].axisValue}<br/>`;return e.forEach(e=>{if("Kçº¿"===e.seriesName){const a=e.data;t+=`å¼€ç›˜: ${a[1]}<br/>æ”¶ç›˜: ${a[2]}<br/>æœ€ä½: ${a[3]}<br/>æœ€é«˜: ${a[4]}<br/>`}else"æˆäº¤é¢"===e.seriesName?t+=`æˆäº¤é¢: ${Ke.Wp.formatVolume(e.value)}<br/>`:t+=`${e.seriesName}: ${e.value}<br/>`}),t}},legend:{data:["MA5","MA10","MA20"],top:30,right:10},grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"70%",height:"16%"}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100}],series:[{name:"Kçº¿",type:"candlestick",data:t,itemStyle:{color:"#ef232a",color0:"#14b143",borderColor:"#ef232a",borderColor0:"#14b143"}},{name:"MA5",type:"line",data:l,smooth:!0,symbol:"none",lineStyle:{opacity:.8,color:"#4ECDC4"},itemStyle:{color:"#4ECDC4"}},{name:"MA10",type:"line",data:n,smooth:!0,symbol:"none",lineStyle:{opacity:.8,color:"#ffbf00"},itemStyle:{color:"#ffbf00"}},{name:"MA20",type:"line",data:s,smooth:!0,symbol:"none",lineStyle:{opacity:.8,color:"#f92672"},itemStyle:{color:"#f92672"}},{name:"æˆäº¤é¢",type:"bar",xAxisIndex:1,yAxisIndex:1,data:a}]}}),v=async()=>{if(e.value){t.value=!0;try{console.log("ğŸ” å¼€å§‹åˆ†æèµšé’±æ•ˆåº”...",{date:e.value});const[t,a]=await Promise.all([na.A.get(`${h}/api/money-effect`,{params:{date:e.value,type:"all",exclude_st:p.value.excludeST,include_non_main_board:p.value.includeNonMainBoard}}),na.A.get(`${h}/api/money-effect`,{params:{date:e.value,type:"strong",exclude_st:p.value.excludeST,include_non_main_board:p.value.includeNonMainBoard}})]);t.data.success?(l.value=t.data.stocks||[],c.value=t.data.stats||{},console.log("âœ… å…¨éƒ¨è‚¡ç¥¨åˆ†æå®Œæˆ",{stockCount:l.value.length})):(l.value=[],c.value=null),a.data.success?(s.value=a.data.stocks||[],u.value=a.data.stats||{},console.log("âœ… å¼ºåŠ¿è‚¡åˆ†æå®Œæˆ",{stockCount:s.value.length})):(s.value=[],u.value=null);const n=l.value.length+s.value.length;n>0?Ne.nk.success(`åˆ†æå®Œæˆï¼šå…¨éƒ¨è‚¡ç¥¨${l.value.length}åªï¼Œå¼ºåŠ¿è‚¡${s.value.length}åª`):Ne.nk.warning("å½“å‰æ—¥æœŸæ— æ•°æ®")}catch(a){console.error("âŒ èµšé’±æ•ˆåº”åˆ†æå¤±è´¥:",a),Ne.nk.error("åˆ†æå¤±è´¥: "+(a.response?.data?.message||a.message)),l.value=[],s.value=[],c.value=null,u.value=null}finally{t.value=!1}}else Ne.nk.warning("è¯·é€‰æ‹©åˆ†ææ—¥æœŸ")},b=async e=>{o.value=e,await y(e)},f=e=>{e&&b(e)},y=async e=>{if(e){i.value=!0;try{console.log("ğŸ“ˆ åŠ è½½Kçº¿å›¾:",e.åç§°,e.ä»£ç );const t=await Ke.Ay.getStockKline(e.ä»£ç ,60);r.value=t.data?.data?.kline_data||[],console.log(`âœ… è·å– ${e.ä»£ç } Kçº¿æ•°æ®: ${r.value.length} æ¡è®°å½•`)}catch(t){console.error("âŒ Kçº¿å›¾åŠ è½½å¤±è´¥:",t),Ne.nk.error("Kçº¿å›¾åŠ è½½å¤±è´¥: "+(t.response?.data?.message||t.message)),r.value=[]}finally{i.value=!1}}},C=async()=>{a.value=!0;try{await v(),Ne.nk.success("æ•°æ®åˆ·æ–°å®Œæˆ")}catch(e){Ne.nk.error("æ•°æ®åˆ·æ–°å¤±è´¥")}finally{a.value=!1}},w=(t="all")=>{let a=[],n="";if("all"===t){if(0===l.value.length)return void Ne.nk.warning("æš‚æ— å…¨éƒ¨è‚¡ç¥¨æ•°æ®å¯å¯¼å‡º");a=l.value,n=`å…¨éƒ¨è‚¡ç¥¨èµšé’±æ•ˆåº”_${e.value}.csv`}else if("strong"===t){if(0===s.value.length)return void Ne.nk.warning("æš‚æ— å¼ºåŠ¿è‚¡æ•°æ®å¯å¯¼å‡º");a=s.value,n=`å¼ºåŠ¿è‚¡èµšé’±æ•ˆåº”_${e.value}.csv`}try{const e=F(a,t);D(e,n),Ne.nk.success("æ•°æ®å¯¼å‡ºæˆåŠŸ")}catch(o){console.error("å¯¼å‡ºå¤±è´¥:",o),Ne.nk.error("æ•°æ®å¯¼å‡ºå¤±è´¥")}},F=(e,t="all")=>{let a=["åç§°","ä»£ç ","è¿æ¿å¤©æ•°","æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…","å½“æ—¥æ¶¨è·Œå¹…","5æ—¥æ¶¨è·Œå¹…","10æ—¥æ¶¨è·Œå¹…","20æ—¥æ¶¨è·Œå¹…","æ”¶ç›˜ä»·","æˆäº¤é¢"];"strong"===t&&(a=["åç§°","ä»£ç ","è¿æ¿å¤©æ•°","å†å²æœ€é«˜è¿æ¿","æœ€ä½åˆ°æ”¶ç›˜æ¶¨å¹…","å½“æ—¥æ¶¨è·Œå¹…","5æ—¥æ¶¨è·Œå¹…","10æ—¥æ¶¨è·Œå¹…","20æ—¥æ¶¨è·Œå¹…","æ”¶ç›˜ä»·","æˆäº¤é¢"]);const l=[a.join(",")];return e.forEach(e=>{const t=a.map(t=>{const a=e[t];return"string"===typeof a?`"${a}"`:a});l.push(t.join(","))}),l.join("\n")},D=(e,t)=>{const a=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),n=URL.createObjectURL(a);l.setAttribute("href",n),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},L=e=>{if(null===e||void 0===e)return"";const t=Number(e);return t>0?"positive":t<0?"negative":""},x=e=>e>=6?"danger":e>=4?"warning":"success";return(0,n.wB)(e,()=>{(l.value.length>0||s.value.length>0)&&v()}),(0,n.sV)(()=>{v()}),{selectedDate:e,analyzing:t,refreshing:a,allStocksList:l,strongStocksList:s,selectedStock:o,klineData:r,klineOption:_,klineLoading:i,allStatsData:c,strongStatsData:u,filterOptions:p,analyzeMoneyEffect:v,selectStock:b,handleStockSelect:f,refreshData:C,exportData:w,formatNumber:g,formatPercent:m,formatVolume:k,getChangeClass:L,getBoardTagType:x}}};const ia=(0,h.A)(ra,[["render",la],["__scopeId","data-v-44a416e4"]]);var ca=ia;const da={class:"sector-analysis"},ua={class:"control-section"},pa={class:"filter-controls-vertical"},ha={class:"control-section"},ga={class:"control-section"},ma={class:"multi-period-controls-horizontal"},ka={class:"quick-intervals"},_a={class:"custom-interval-input-expanded"},va={class:"control-section"},ba={class:"control-section"},fa={style:{display:"flex","flex-wrap":"wrap",gap:"8px"}},ya={class:"stat-content"},Ca={class:"stat-value"},wa={class:"stat-content"},Fa={class:"stat-value up-color"},Da={class:"stat-content"},La={class:"stat-value down-color"},xa={class:"stat-content"},Sa={class:"card-header"},Ea={class:"card-header"},Ma={key:0,class:"chart-container"},Aa={key:1,class:"no-chart"},Ka={key:0,class:"loading-state"},Ta={class:"card-header"},Ia={key:0},Va={class:"sector-info"},$a={key:1,class:"no-data"},Ya={class:"card-header"},Ra={key:0,class:"chart-container"},Wa={key:1,class:"no-chart"},Pa={key:0,class:"loading-state"},Oa={class:"card-header"},Xa={class:"stock-comparison-controls"},Ba={class:"time-range-controls"},Ha={key:0,class:"preset-controls"},Na={key:1,class:"custom-controls"},Ua={class:"stock-selection-area"},ja={class:"search-section"},za={class:"search-controls"},Ga={key:0,class:"search-results"},qa={class:"search-results-list"},Qa={class:"selected-section"},Za={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"10px"}},Ja={style:{display:"flex",gap:"10px"}},el={key:0,class:"selected-stocks"},tl={key:1,class:"no-stocks-selected"},al={class:"comparison-chart-area"},ll={key:1,class:"no-chart"},nl={key:0,style:{"text-align":"center",padding:"20px"}},sl={key:1,style:{"text-align":"center",padding:"20px"}},ol={key:2};function rl(e,t,a,l,s,o){const r=(0,n.g2)("el-checkbox"),i=(0,n.g2)("el-col"),c=(0,n.g2)("trading-date-picker"),d=(0,n.g2)("el-option"),u=(0,n.g2)("el-select"),p=(0,n.g2)("el-input"),h=(0,n.g2)("el-date-picker"),g=(0,n.g2)("el-button"),m=(0,n.g2)("Refresh"),_=(0,n.g2)("el-icon"),v=(0,n.g2)("el-row"),b=(0,n.g2)("el-tag"),f=(0,n.g2)("el-card"),y=(0,n.g2)("el-table-column"),C=(0,n.g2)("el-table"),w=(0,n.g2)("v-chart"),F=(0,n.g2)("el-skeleton"),D=(0,n.g2)("el-empty"),L=(0,n.g2)("el-switch"),x=(0,n.g2)("el-radio-button"),S=(0,n.g2)("el-radio-group"),E=(0,n.g2)("TrendCharts"),M=(0,n.g2)("Search"),A=(0,n.g2)("EChartsRenderer"),K=(0,n.g2)("el-form-item"),T=(0,n.g2)("el-form"),I=(0,n.g2)("el-dialog"),V=(0,n.g2)("Loading");return(0,n.uX)(),(0,n.CE)("div",da,[t[54]||(t[54]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ¢ æ¿å—åˆ†æ"),(0,n.Lk)("p",null,"å®æ—¶è¡Œä¸šå’Œæ¦‚å¿µæ¿å—æ•°æ®åˆ†æä¸Kçº¿å›¾å¯è§†åŒ–")],-1)),(0,n.bF)(f,{class:"control-panel-top"},{default:(0,n.k6)(()=>[(0,n.bF)(v,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:3},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ua,[t[23]||(t[23]=(0,n.Lk)("h4",null,"æ¿å—ç±»å‹",-1)),(0,n.Lk)("div",pa,[(0,n.bF)(r,{modelValue:l.includeSectors,"onUpdate:modelValue":t[0]||(t[0]=e=>l.includeSectors=e),onChange:l.onFilterChange,class:"blue-checkbox"},{default:(0,n.k6)(()=>t[21]||(t[21]=[(0,n.eW)("è¡Œä¸šæ¿å—")])),_:1,__:[21]},8,["modelValue","onChange"]),(0,n.bF)(r,{modelValue:l.includeConcepts,"onUpdate:modelValue":t[1]||(t[1]=e=>l.includeConcepts=e),onChange:l.onFilterChange,class:"blue-checkbox"},{default:(0,n.k6)(()=>t[22]||(t[22]=[(0,n.eW)("æ¦‚å¿µæ¿å—")])),_:1,__:[22]},8,["modelValue","onChange"])])])]),_:1}),(0,n.bF)(i,{span:4},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ha,[t[24]||(t[24]=(0,n.Lk)("h4",null,"åˆ†ææ—¥æœŸ",-1)),(0,n.bF)(c,{modelValue:l.globalDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.globalDate=e),placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"},onChange:l.onGlobalDateChange},null,8,["modelValue","onChange"])])]),_:1}),(0,n.bF)(i,{span:14},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ga,[t[26]||(t[26]=(0,n.Lk)("h4",null,"å¤šæ—¶é—´åŒºé—´åˆ†æ",-1)),(0,n.Lk)("div",ma,[(0,n.Lk)("div",ka,[(0,n.bF)(u,{modelValue:l.selectedQuickIntervals,"onUpdate:modelValue":t[3]||(t[3]=e=>l.selectedQuickIntervals=e),multiple:"",placeholder:"å¿«é€ŸåŒºé—´",style:{width:"200px"},size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"æœ€è¿‘5å¤©",value:"5d"}),(0,n.bF)(d,{label:"æœ€è¿‘10å¤©",value:"10d"}),(0,n.bF)(d,{label:"æœ€è¿‘30å¤©",value:"30d"}),(0,n.bF)(d,{label:"æœ€è¿‘90å¤©",value:"90d"})]),_:1},8,["modelValue"])]),(0,n.Lk)("div",_a,[(0,n.bF)(p,{modelValue:l.customInterval.name,"onUpdate:modelValue":t[4]||(t[4]=e=>l.customInterval.name=e),placeholder:"åŒºé—´åç§°",size:"small",style:{width:"100px","margin-right":"8px"}},null,8,["modelValue"]),(0,n.bF)(h,{modelValue:l.customInterval.startDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.customInterval.startDate=e),type:"date",placeholder:"å¼€å§‹æ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"120px","margin-right":"8px"},size:"small"},null,8,["modelValue"]),(0,n.bF)(h,{modelValue:l.customInterval.endDate,"onUpdate:modelValue":t[6]||(t[6]=e=>l.customInterval.endDate=e),type:"date",placeholder:"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"120px","margin-right":"8px"},size:"small"},null,8,["modelValue"]),(0,n.bF)(g,{type:"primary",size:"small",onClick:l.addCustomInterval,disabled:!l.canAddCustomInterval},{default:(0,n.k6)(()=>t[25]||(t[25]=[(0,n.eW)(" æ·»åŠ åŒºé—´ ")])),_:1,__:[25]},8,["onClick","disabled"])])])])]),_:1}),(0,n.bF)(i,{span:3},{default:(0,n.k6)(()=>[(0,n.Lk)("div",va,[t[28]||(t[28]=(0,n.Lk)("h4",null,"Â ",-1)),(0,n.bF)(g,{type:"primary",onClick:l.loadAllData,loading:l.loading,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(m)]),_:1}),t[27]||(t[27]=(0,n.eW)(" åˆ·æ–°æ•°æ® "))]),_:1,__:[27]},8,["onClick","loading"])])]),_:1})]),_:1}),l.customIntervals.length>0?((0,n.uX)(),(0,n.Wv)(v,{key:0,style:{"margin-top":"15px"}},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:24},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ba,[t[29]||(t[29]=(0,n.Lk)("h4",null,"å·²æ·»åŠ çš„æ—¶é—´åŒºé—´",-1)),(0,n.Lk)("div",fa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.customIntervals,(e,t)=>((0,n.uX)(),(0,n.Wv)(b,{key:t,closable:"",onClose:e=>l.removeCustomInterval(t),type:"info",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.name)+" ("+(0,k.v_)(e.start_date)+" è‡³ "+(0,k.v_)(e.end_date)+") ",1)]),_:2},1032,["onClose"]))),128))])])]),_:1})]),_:1})):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(v,{gutter:15,class:"stats-row"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(f,{class:"stat-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ya,[(0,n.Lk)("div",Ca,(0,k.v_)(l.summary.total_sectors||0),1),t[30]||(t[30]=(0,n.Lk)("div",{class:"stat-label"},"æ€»æ¿å—æ•°",-1))])]),_:1})]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(f,{class:"stat-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",wa,[(0,n.Lk)("div",Fa,(0,k.v_)(l.summary.up_sectors||0),1),t[31]||(t[31]=(0,n.Lk)("div",{class:"stat-label"},"ä¸Šæ¶¨æ¿å—",-1))])]),_:1})]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(f,{class:"stat-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",Da,[(0,n.Lk)("div",La,(0,k.v_)(l.summary.down_sectors||0),1),t[32]||(t[32]=(0,n.Lk)("div",{class:"stat-label"},"ä¸‹è·Œæ¿å—",-1))])]),_:1})]),_:1}),(0,n.bF)(i,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(f,{class:"stat-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",xa,[(0,n.Lk)("div",{class:(0,k.C4)(["stat-value",l.summary.avg_change>=0?"up-color":"down-color"])},(0,k.v_)(l.formatPercent(l.summary.avg_change)),3),t[33]||(t[33]=(0,n.Lk)("div",{class:"stat-label"},"å¹³å‡æ¶¨è·Œå¹…",-1))])]),_:1})]),_:1})]),_:1}),(0,n.bF)(v,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:14},{default:(0,n.k6)(()=>[(0,n.bF)(f,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Sa,[t[35]||(t[35]=(0,n.Lk)("span",null,"ğŸ“Š æ¿å—æ’è¡Œæ¦œ",-1)),(0,n.bF)(g,{type:"primary",size:"small",onClick:l.loadData,loading:l.loading},{default:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(m)]),_:1}),t[34]||(t[34]=(0,n.eW)(" åˆ·æ–° "))]),_:1,__:[34]},8,["onClick","loading"])])]),default:(0,n.k6)(()=>[(0,n.bF)(C,{data:l.topSectors,stripe:"",height:"400",onRowClick:l.selectSector,"highlight-current-row":"","row-class-name":l.getSectorRowClass},{default:(0,n.k6)(()=>[(0,n.bF)(y,{prop:"æ¿å—åç§°",label:"æ¿å—åç§°",width:"120"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,k.v_)(e.æ¿å—åç§°),1)]),_:1}),(0,n.bF)(y,{prop:"æ¿å—ç±»å‹",label:"ç±»å‹",align:"center",width:"80"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(b,{type:"è¡Œä¸š"===e.æ¿å—ç±»å‹?"success":"primary",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)("è¡Œä¸š"===e.æ¿å—ç±»å‹?"è¡Œä¸š":"æ¦‚å¿µ"),1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(y,{prop:"æ¶¨è·Œå¹…",label:"æ—¥æ¶¨è·Œå¹…",align:"right",width:"90",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e.æ¶¨è·Œå¹…||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e.æ¶¨è·Œå¹…&&void 0!==e.æ¶¨è·Œå¹…?l.formatPercent(e.æ¶¨è·Œå¹…):"--"),3)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"5æ—¥æ¶¨è·Œå¹…",label:"5æ—¥æ¶¨è·Œå¹…",align:"right",width:"90",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"5æ—¥æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e["5æ—¥æ¶¨è·Œå¹…"]||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e["5æ—¥æ¶¨è·Œå¹…"]&&void 0!==e["5æ—¥æ¶¨è·Œå¹…"]?l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…"]):"--"),3)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"10æ—¥æ¶¨è·Œå¹…",label:"10æ—¥æ¶¨è·Œå¹…",align:"right",width:"90",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"10æ—¥æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e["10æ—¥æ¶¨è·Œå¹…"]||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e["10æ—¥æ¶¨è·Œå¹…"]&&void 0!==e["10æ—¥æ¶¨è·Œå¹…"]?l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…"]):"--"),3)]),_:1},8,["sort-method"]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.allIntervals,e=>((0,n.uX)(),(0,n.Wv)(y,{key:e.key,prop:e.key,label:e.name,align:"right",width:"90",sortable:"","sort-method":(t,a)=>l.sortByNumber(t,a,e.key)},{default:(0,n.k6)(({row:t})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(t[e.key]||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==t[e.key]&&void 0!==t[e.key]?l.formatPercent(t[e.key]):"--"),3)]),_:2},1032,["prop","label","sort-method"]))),128)),(0,n.bF)(y,{prop:"æˆäº¤é¢",label:"æˆäº¤é¢",align:"right",width:"100",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"æˆäº¤é¢_åŸå§‹")},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,k.v_)(e.æˆäº¤é¢_æ ¼å¼åŒ–||l.formatAmount(e.æˆäº¤é¢)),1)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"æˆäº¤é¢é‡æ¯”",label:"é‡æ¯”",align:"right",width:"80",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"æˆäº¤é¢é‡æ¯”")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e.æˆäº¤é¢é‡æ¯”||1)>=1?"up-color":"down-color")},(0,k.v_)(e.æˆäº¤é¢é‡æ¯”?parseFloat(e.æˆäº¤é¢é‡æ¯”).toFixed(2):"--"),3)]),_:1},8,["sort-method"])]),_:1},8,["data","onRowClick","row-class-name"])]),_:1})]),_:1}),(0,n.bF)(i,{span:10},{default:(0,n.k6)(()=>[(0,n.bF)(f,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Ea,[(0,n.Lk)("span",null,(0,k.v_)(l.selectedSector?`${l.selectedSector.æ¿å—åç§°} - Kçº¿å›¾`:"æ¿å—Kçº¿å›¾"),1)])]),default:(0,n.k6)(()=>[l.sectorKlineData.length>0?((0,n.uX)(),(0,n.CE)("div",Ma,[(0,n.bF)(w,{option:l.sectorKlineOption,style:{height:"400px",width:"100%"},autoresize:""},null,8,["option"])])):((0,n.uX)(),(0,n.CE)("div",Aa,[l.klineLoading?((0,n.uX)(),(0,n.CE)("div",Ka,[(0,n.bF)(F,{rows:8,animated:""}),t[36]||(t[36]=(0,n.Lk)("div",{style:{"text-align":"center","margin-top":"10px",color:"#666"}}," æ­£åœ¨åŠ è½½æ¿å—Kçº¿å›¾... ",-1))])):((0,n.uX)(),(0,n.Wv)(D,{key:1,description:"è¯·ç‚¹å‡»å·¦ä¾§æ¿å—æŸ¥çœ‹Kçº¿å›¾"}))]))]),_:1})]),_:1})]),_:1}),(0,n.bF)(v,{gutter:20,class:"chart-row"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(f,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Ta,[(0,n.Lk)("span",null,(0,k.v_)(l.selectedSector?`${l.selectedSector.æ¿å—åç§°} - æˆåˆ†è‚¡`:"æ¿å—æˆåˆ†è‚¡"),1),l.selectedSector?((0,n.uX)(),(0,n.Wv)(g,{key:0,type:"primary",size:"small",onClick:l.loadSectorStocks,loading:l.stocksLoading},{default:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(m)]),_:1}),t[37]||(t[37]=(0,n.eW)(" åˆ·æ–°æˆåˆ†è‚¡ "))]),_:1,__:[37]},8,["onClick","loading"])):(0,n.Q3)("",!0)])]),default:(0,n.k6)(()=>[l.selectedSector?((0,n.uX)(),(0,n.CE)("div",Ia,[(0,n.Lk)("div",Va,[(0,n.bF)(b,{type:"è¡Œä¸š"===l.selectedSector.æ¿å—ç±»å‹?"success":"primary",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)("è¡Œä¸š"===l.selectedSector.æ¿å—ç±»å‹?"è¡Œä¸š":"æ¦‚å¿µ"),1)]),_:1},8,["type"]),(0,n.Lk)("span",{class:(0,k.C4)(["sector-change",l.selectedSector.æ¶¨è·Œå¹…>=0?"up-color":"down-color"])},(0,k.v_)(null!==l.selectedSector.æ¶¨è·Œå¹…&&void 0!==l.selectedSector.æ¶¨è·Œå¹…?l.formatPercent(l.selectedSector.æ¶¨è·Œå¹…):"--"),3)]),(0,n.bF)(C,{data:l.sectorStocks,stripe:"",height:"500",onRowClick:l.selectStock,"highlight-current-row":"","row-class-name":l.getStockRowClass},{default:(0,n.k6)(()=>[(0,n.bF)(y,{prop:"åç§°",label:"è‚¡ç¥¨åç§°",width:"120"}),(0,n.bF)(y,{prop:"ä»£ç ",label:"ä»£ç ",width:"100"}),(0,n.bF)(y,{prop:"æ¶¨è·Œå¹…",label:"æ¶¨è·Œå¹…",align:"right",width:"100",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e.æ¶¨è·Œå¹…||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e.æ¶¨è·Œå¹…&&void 0!==e.æ¶¨è·Œå¹…?l.formatPercent(e.æ¶¨è·Œå¹…):"--"),3)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"5æ—¥æ¶¨è·Œå¹…",label:"5æ—¥æ¶¨è·Œå¹…",align:"right",width:"100",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"5æ—¥æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e["5æ—¥æ¶¨è·Œå¹…"]||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e["5æ—¥æ¶¨è·Œå¹…"]&&void 0!==e["5æ—¥æ¶¨è·Œå¹…"]?l.formatPercent(e["5æ—¥æ¶¨è·Œå¹…"]):"--"),3)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"10æ—¥æ¶¨è·Œå¹…",label:"10æ—¥æ¶¨è·Œå¹…",align:"right",width:"100",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"10æ—¥æ¶¨è·Œå¹…")},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("span",{class:(0,k.C4)(parseFloat(e["10æ—¥æ¶¨è·Œå¹…"]||0)>=0?"up-color":"down-color")},(0,k.v_)(null!==e["10æ—¥æ¶¨è·Œå¹…"]&&void 0!==e["10æ—¥æ¶¨è·Œå¹…"]?l.formatPercent(e["10æ—¥æ¶¨è·Œå¹…"]):"--"),3)]),_:1},8,["sort-method"]),(0,n.bF)(y,{prop:"æœ€æ–°ä»·",label:"æœ€æ–°ä»·",align:"right",width:"100",sortable:"","sort-method":(e,t)=>l.sortByNumber(e,t,"æœ€æ–°ä»·")},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,k.v_)(null!==e.æœ€æ–°ä»·&&void 0!==e.æœ€æ–°ä»·?parseFloat(e.æœ€æ–°ä»·).toFixed(2):"--"),1)]),_:1},8,["sort-method"])]),_:1},8,["data","onRowClick","row-class-name"])])):((0,n.uX)(),(0,n.CE)("div",$a,[(0,n.bF)(D,{description:"è¯·ç‚¹å‡»å·¦ä¾§æ¿å—æŸ¥çœ‹æˆåˆ†è‚¡"})]))]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(f,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Ya,[(0,n.Lk)("span",null,(0,k.v_)(l.selectedStock?`${l.selectedStock.åç§°}(${l.selectedStock.ä»£ç }) - Kçº¿å›¾`:"ä¸ªè‚¡Kçº¿å›¾"),1)])]),default:(0,n.k6)(()=>[l.stockKlineData.length>0?((0,n.uX)(),(0,n.CE)("div",Ra,[(0,n.bF)(w,{option:l.stockKlineOption,style:{height:"600px",width:"100%"},autoresize:""},null,8,["option"])])):((0,n.uX)(),(0,n.CE)("div",Wa,[l.stockKlineLoading?((0,n.uX)(),(0,n.CE)("div",Pa,[(0,n.bF)(F,{rows:8,animated:""}),t[38]||(t[38]=(0,n.Lk)("div",{style:{"text-align":"center","margin-top":"10px",color:"#666"}}," æ­£åœ¨åŠ è½½ä¸ªè‚¡Kçº¿å›¾... ",-1))])):((0,n.uX)(),(0,n.Wv)(D,{key:1,description:"è¯·ç‚¹å‡»å·¦ä¾§æˆåˆ†è‚¡æŸ¥çœ‹ä¸ªè‚¡Kçº¿å›¾"}))]))]),_:1})]),_:1})]),_:1}),(0,n.bF)(v,{gutter:20,class:"chart-row"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:24},{default:(0,n.k6)(()=>[(0,n.bF)(f,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Oa,[t[42]||(t[42]=(0,n.Lk)("span",null,"ğŸ“Š å¤šä¸ªæ¿å—Kçº¿å›¾å¯¹æ¯”",-1)),(0,n.Lk)("div",Xa,[(0,n.bF)(L,{modelValue:l.normalizeComparison,"onUpdate:modelValue":t[7]||(t[7]=e=>l.normalizeComparison=e),"active-text":"æ¶¨è·Œå¹…å¯¹æ¯”","inactive-text":"ä»·æ ¼å¯¹æ¯”",style:{"margin-right":"15px"}},null,8,["modelValue"]),(0,n.Lk)("div",Ba,[(0,n.bF)(S,{modelValue:l.timeRangeType,"onUpdate:modelValue":t[8]||(t[8]=e=>l.timeRangeType=e),style:{"margin-right":"15px"}},{default:(0,n.k6)(()=>[(0,n.bF)(x,{label:"preset"},{default:(0,n.k6)(()=>t[39]||(t[39]=[(0,n.eW)("å¿«é€Ÿé€‰æ‹©")])),_:1,__:[39]}),(0,n.bF)(x,{label:"custom"},{default:(0,n.k6)(()=>t[40]||(t[40]=[(0,n.eW)("è‡ªå®šä¹‰æ—¶é—´")])),_:1,__:[40]})]),_:1},8,["modelValue"]),"preset"===l.timeRangeType?((0,n.uX)(),(0,n.CE)("div",Ha,[(0,n.bF)(u,{modelValue:l.comparisonDays,"onUpdate:modelValue":t[9]||(t[9]=e=>l.comparisonDays=e),style:{width:"120px","margin-right":"10px"}},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"æœ€è¿‘15å¤©",value:15}),(0,n.bF)(d,{label:"æœ€è¿‘30å¤©",value:30}),(0,n.bF)(d,{label:"æœ€è¿‘60å¤©",value:60}),(0,n.bF)(d,{label:"æœ€è¿‘90å¤©",value:90})]),_:1},8,["modelValue"])])):((0,n.uX)(),(0,n.CE)("div",Na,[(0,n.bF)(h,{modelValue:l.customStartDate,"onUpdate:modelValue":t[10]||(t[10]=e=>l.customStartDate=e),type:"date",placeholder:"å¼€å§‹æ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"140px","margin-right":"8px"},size:"default"},null,8,["modelValue"]),(0,n.bF)(h,{modelValue:l.customEndDate,"onUpdate:modelValue":t[11]||(t[11]=e=>l.customEndDate=e),type:"date",placeholder:"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"140px","margin-right":"10px"},size:"default"},null,8,["modelValue"])]))]),(0,n.bF)(g,{type:"primary",onClick:l.generateStockComparison,loading:l.comparisonLoading,disabled:0===l.selectedStocks.length||!l.isTimeRangeValid},{default:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(E)]),_:1}),t[41]||(t[41]=(0,n.eW)(" ç”Ÿæˆå¯¹æ¯”å›¾ "))]),_:1,__:[41]},8,["onClick","loading","disabled"])])])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",Ua,[(0,n.Lk)("div",ja,[t[45]||(t[45]=(0,n.Lk)("h4",null,"æ·»åŠ è‚¡ç¥¨",-1)),(0,n.Lk)("div",za,[(0,n.bF)(p,{modelValue:l.stockSearchQuery,"onUpdate:modelValue":t[12]||(t[12]=e=>l.stockSearchQuery=e),placeholder:"è¾“å…¥è‚¡ç¥¨ä»£ç æˆ–åç§°æœç´¢",style:{width:"300px","margin-right":"10px"},onInput:l.onStockSearch,clearable:""},{prefix:(0,n.k6)(()=>[(0,n.bF)(_,null,{default:(0,n.k6)(()=>[(0,n.bF)(M)]),_:1})]),_:1},8,["modelValue","onInput"]),(0,n.bF)(g,{type:"info",onClick:l.clearAllStocks},{default:(0,n.k6)(()=>t[43]||(t[43]=[(0,n.eW)("æ¸…ç©ºæ‰€æœ‰")])),_:1,__:[43]},8,["onClick"])]),l.stockSearchResults.length>0?((0,n.uX)(),(0,n.CE)("div",Ga,[t[44]||(t[44]=(0,n.Lk)("div",{class:"search-results-header"},"æœç´¢ç»“æœï¼š",-1)),(0,n.Lk)("div",qa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.stockSearchResults,e=>((0,n.uX)(),(0,n.Wv)(b,{key:e.ä»£ç ,class:"search-result-tag",onClick:t=>l.addStock(e),type:l.isStockSelected(e.ä»£ç )?"success":"info"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.åç§°)+"("+(0,k.v_)(e.ä»£ç )+") ",1),(0,n.Lk)("span",{class:(0,k.C4)(["stock-price",parseFloat(e.æ¶¨è·Œå¹…)>=0?"up-color":"down-color"])},(0,k.v_)(e.æ¶¨è·Œå¹…)+"% ",3)]),_:2},1032,["onClick","type"]))),128))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Qa,[(0,n.Lk)("div",Za,[(0,n.Lk)("h4",null,"å·²é€‰æ‹©è‚¡ç¥¨ ("+(0,k.v_)(l.selectedStocks.length)+"/30)",1),(0,n.Lk)("div",Ja,[(0,n.bF)(g,{size:"small",onClick:t[13]||(t[13]=e=>l.showSaveGroupDialog=!0),disabled:0===l.selectedStocks.length},{default:(0,n.k6)(()=>t[46]||(t[46]=[(0,n.eW)(" ğŸ’¾ ä¿å­˜ç»„åˆ ")])),_:1,__:[46]},8,["disabled"]),(0,n.bF)(g,{size:"small",onClick:t[14]||(t[14]=e=>l.showLoadGroupDialog=!0)},{default:(0,n.k6)(()=>t[47]||(t[47]=[(0,n.eW)(" ğŸ“‚ åŠ è½½ç»„åˆ ")])),_:1,__:[47]})])]),l.selectedStocks.length>0?((0,n.uX)(),(0,n.CE)("div",el,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectedStocks,e=>((0,n.uX)(),(0,n.Wv)(b,{key:e.ä»£ç ,closable:"",onClose:t=>l.removeStock(e.ä»£ç ),type:"success",size:"large",class:"selected-stock-tag"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.åç§°)+"("+(0,k.v_)(e.ä»£ç )+") ",1)]),_:2},1032,["onClose"]))),128))])):((0,n.uX)(),(0,n.CE)("div",tl,[(0,n.bF)(D,{description:"è¯·æœç´¢å¹¶æ·»åŠ è‚¡ç¥¨è¿›è¡Œå¯¹æ¯”åˆ†æ","image-size":80})]))])]),(0,n.Lk)("div",al,[l.stockComparisonChart?((0,n.uX)(),(0,n.Wv)(A,{key:0,chartHtml:l.stockComparisonChart,height:"800px"},null,8,["chartHtml"])):((0,n.uX)(),(0,n.CE)("div",ll,[(0,n.bF)(D,{description:"æ·»åŠ è‚¡ç¥¨å¹¶ç‚¹å‡»ç”Ÿæˆå¯¹æ¯”å›¾æŒ‰é’®æŸ¥çœ‹å¯¹æ¯”åˆ†æ"})]))])]),_:1})]),_:1})]),_:1}),(0,n.bF)(I,{modelValue:l.showSaveGroupDialog,"onUpdate:modelValue":t[18]||(t[18]=e=>l.showSaveGroupDialog=e),title:"ğŸ’¾ ä¿å­˜è‚¡ç¥¨ç»„åˆ",width:"500px"},{footer:(0,n.k6)(()=>[(0,n.bF)(g,{onClick:t[17]||(t[17]=e=>l.showSaveGroupDialog=!1)},{default:(0,n.k6)(()=>t[48]||(t[48]=[(0,n.eW)("å–æ¶ˆ")])),_:1,__:[48]}),(0,n.bF)(g,{type:"primary",onClick:l.saveStockGroup,loading:l.savingGroup},{default:(0,n.k6)(()=>t[49]||(t[49]=[(0,n.eW)("ä¿å­˜")])),_:1,__:[49]},8,["onClick","loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(T,{model:l.saveGroupForm,"label-width":"80px"},{default:(0,n.k6)(()=>[(0,n.bF)(K,{label:"ç»„åˆåç§°",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:l.saveGroupForm.name,"onUpdate:modelValue":t[15]||(t[15]=e=>l.saveGroupForm.name=e),placeholder:"è¯·è¾“å…¥ç»„åˆåç§°",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,n.bF)(K,{label:"ç»„åˆæè¿°"},{default:(0,n.k6)(()=>[(0,n.bF)(p,{modelValue:l.saveGroupForm.description,"onUpdate:modelValue":t[16]||(t[16]=e=>l.saveGroupForm.description=e),type:"textarea",placeholder:"è¯·è¾“å…¥ç»„åˆæè¿°ï¼ˆå¯é€‰ï¼‰",maxlength:"200",rows:3},null,8,["modelValue"])]),_:1}),(0,n.bF)(K,{label:"è‚¡ç¥¨æ•°é‡"},{default:(0,n.k6)(()=>[(0,n.Lk)("span",null,(0,k.v_)(l.selectedStocks.length)+" åªè‚¡ç¥¨",1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,n.bF)(I,{modelValue:l.showLoadGroupDialog,"onUpdate:modelValue":t[20]||(t[20]=e=>l.showLoadGroupDialog=e),title:"ğŸ“‚ åŠ è½½è‚¡ç¥¨ç»„åˆ",width:"600px"},{footer:(0,n.k6)(()=>[(0,n.bF)(g,{onClick:t[19]||(t[19]=e=>l.showLoadGroupDialog=!1)},{default:(0,n.k6)(()=>t[53]||(t[53]=[(0,n.eW)("å…³é—­")])),_:1,__:[53]})]),default:(0,n.k6)(()=>[l.loadingGroups?((0,n.uX)(),(0,n.CE)("div",nl,[(0,n.bF)(_,{class:"is-loading"},{default:(0,n.k6)(()=>[(0,n.bF)(V)]),_:1}),t[50]||(t[50]=(0,n.Lk)("p",null,"æ­£åœ¨åŠ è½½è‚¡ç¥¨ç»„åˆ...",-1))])):0===l.stockGroups.length?((0,n.uX)(),(0,n.CE)("div",sl,[(0,n.bF)(D,{description:"æš‚æ— ä¿å­˜çš„è‚¡ç¥¨ç»„åˆ"})])):((0,n.uX)(),(0,n.CE)("div",ol,[(0,n.bF)(C,{data:l.stockGroups,style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(y,{prop:"name",label:"ç»„åˆåç§°",width:"150"}),(0,n.bF)(y,{prop:"description",label:"æè¿°","show-overflow-tooltip":""}),(0,n.bF)(y,{prop:"stock_count",label:"è‚¡ç¥¨æ•°é‡",width:"80",align:"center"}),(0,n.bF)(y,{prop:"created_at",label:"åˆ›å»ºæ—¶é—´",width:"120"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,k.v_)(l.formatDate(e.created_at)),1)]),_:1}),(0,n.bF)(y,{label:"æ“ä½œ",width:"120",align:"center"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(g,{size:"small",onClick:t=>l.loadStockGroup(e)},{default:(0,n.k6)(()=>t[51]||(t[51]=[(0,n.eW)("åŠ è½½")])),_:2,__:[51]},1032,["onClick"]),(0,n.bF)(g,{size:"small",type:"danger",onClick:t=>l.deleteStockGroup(e)},{default:(0,n.k6)(()=>t[52]||(t[52]=[(0,n.eW)("åˆ é™¤")])),_:2,__:[52]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]))]),_:1},8,["modelValue"])])}var il=a(7918);const cl=["innerHTML"],dl=["srcdoc"],ul={key:2,class:"debug-controls"},pl={key:3,class:"html-content"};function hl(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",{class:"chart-wrapper",style:(0,k.Tr)({width:"100%",height:a.height})},[l.useDirectRender?((0,n.uX)(),(0,n.CE)("div",{key:0,ref:"directContainer",style:{width:"100%",height:"100%"},innerHTML:l.processedHtml},null,8,cl)):((0,n.uX)(),(0,n.CE)("iframe",{key:1,ref:"chartFrame",srcdoc:l.iframeHtml,style:{width:"100%",height:"100%",border:"none"},onLoad:t[0]||(t[0]=(...e)=>l.onIframeLoad&&l.onIframeLoad(...e)),sandbox:"allow-scripts allow-same-origin"},null,40,dl)),l.showDebug?((0,n.uX)(),(0,n.CE)("div",ul,[(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.toggleRenderMode&&l.toggleRenderMode(...e)),class:"debug-btn"}," åˆ‡æ¢åˆ°"+(0,k.v_)(l.useDirectRender?"iframe":"ç›´æ¥")+"æ¸²æŸ“ ",1),(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>l.showHtmlContent=!l.showHtmlContent),class:"debug-btn"},(0,k.v_)(l.showHtmlContent?"éšè—":"æ˜¾ç¤º")+"HTMLå†…å®¹ ",1)])):(0,n.Q3)("",!0),l.showHtmlContent?((0,n.uX)(),(0,n.CE)("div",pl,[(0,n.Lk)("pre",null,(0,k.v_)(a.chartHtml.substring(0,1e3))+"...",1)])):(0,n.Q3)("",!0)],4)}var gl=a(4485);const ml=(0,h.A)(gl.A,[["render",hl],["__scopeId","data-v-1d470ddc"]]);var kl=ml;(0,Ce.Y)([we.a,Fe.a,De.a,sa.a,Le.a,xe.a,Se.a,Ee.a,Me.a]);var _l={name:"SectorAnalysis",components:{EChartsRenderer:kl,VChart:Ae.Ay,TrendCharts:it.TrendCharts,Search:it.Search,Loading:it.Loading,TradingDatePicker:Te.A},setup(){const e=(0,d.KR)({}),t=(0,d.KR)({}),a=(0,d.KR)(!1),l=(0,d.KR)((new Date).toISOString().split("T")[0]),s=(0,d.KR)(!0),o=(0,d.KR)(!0),r=(0,d.KR)([]),i=(0,d.KR)({startDate:"",endDate:"",name:""}),c=(0,d.KR)([]),u=(0,d.KR)(""),p=(0,d.KR)(""),h=(0,d.KR)(!1),g=(0,d.KR)(""),m=(0,d.KR)(""),k=(0,d.KR)([]),_=(0,d.KR)(!1),v=(0,d.KR)(null),b=(0,d.KR)(null),f=(0,d.KR)([]),y=(0,d.KR)(!1),C=(0,d.KR)(""),w=(0,d.KR)([]),F=(0,d.KR)(!1),D=(0,d.KR)(""),L=(0,d.KR)([]),x=(0,d.KR)([]),S=(0,d.KR)(""),E=(0,d.KR)(!1),M=(0,d.KR)(!0),A=(0,d.KR)(30),K=(0,d.KR)("preset"),T=(0,d.KR)(""),I=(0,d.KR)("");let V=null;const $=(0,d.KR)(!1),Y=(0,d.KR)(!1),R=(0,d.KR)(!1),W=(0,d.KR)(!1),P=(0,d.KR)([]),O=(0,d.KR)({name:"",description:""}),X=(0,n.EW)(()=>e.value.summary||{}),B=(0,n.EW)(()=>e.value.top_sectors||[]),H=(0,n.EW)(()=>i.value.startDate&&i.value.endDate&&i.value.name.trim()),N=(0,n.EW)(()=>{const e=[];return r.value.forEach(t=>{let a,l;switch(t){case"5d":a="5æ—¥æ¶¨è·Œå¹…",l="5æ—¥æ¶¨è·Œå¹…";break;case"10d":a="10æ—¥æ¶¨è·Œå¹…",l="10æ—¥æ¶¨è·Œå¹…";break;case"30d":a="30æ—¥æ¶¨è·Œå¹…",l="30æ—¥æ¶¨è·Œå¹…";break;case"90d":a="90æ—¥æ¶¨è·Œå¹…",l="90æ—¥æ¶¨è·Œå¹…";break}a&&l&&e.push({name:a,key:l})}),c.value.forEach(t=>{e.push({name:t.name,key:`åŒºé—´_${t.name}`})}),e}),U=(0,n.EW)(()=>"preset"===K.value?A.value>0:T.value&&I.value&&new Date(T.value)<new Date(I.value)),j=(0,n.EW)(()=>v.value&&b.value?`${v.value.æ¿å—åç§°} - ${b.value.åç§°}Kçº¿å›¾`:v.value?`${v.value.æ¿å—åç§°}Kçº¿å›¾`:"Kçº¿å›¾"),z=(0,n.EW)(()=>{if(0===k.value.length)return{};const e=k.value.map(e=>e.date),t=k.value.map(e=>[e.open,e.close,e.low,e.high]),a=k.value.map(e=>e.volume||e.amount||0);return{title:{text:v.value?`${v.value.æ¿å—åç§°} Kçº¿å›¾`:"æ¿å—Kçº¿å›¾",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:[{left:"10%",right:"8%",height:"60%"},{left:"10%",right:"8%",top:"75%",height:"15%"}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100}],series:[{name:"Kçº¿",type:"candlestick",data:t,itemStyle:{color:"#ef232a",color0:"#14b143",borderColor:"#ef232a",borderColor0:"#14b143"}},{name:"æˆäº¤é‡",type:"bar",xAxisIndex:1,yAxisIndex:1,data:a.map((e,a)=>{const l=t[a],n=l&&l[1]>=l[0];return{value:e,itemStyle:{color:n?"#ef232a":"#14b143"}}})}]}}),G=(0,n.EW)(()=>{if(0===w.value.length)return{};const e=w.value.map(e=>e.date),t=w.value.map(e=>[e.open,e.close,e.low,e.high]),a=w.value.map(e=>e.volume||0),l=w.value.map(e=>e.ma5),n=w.value.map(e=>e.ma10),s=w.value.map(e=>e.ma20);return{title:{text:b.value?`${b.value.åç§°}(${b.value.ä»£ç }) Kçº¿å›¾`:"ä¸ªè‚¡Kçº¿å›¾",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["MA5","MA10","MA20"],top:30,right:10},grid:[{left:"10%",right:"8%",height:"60%"},{left:"10%",right:"8%",top:"75%",height:"15%"}],xAxis:[{type:"category",data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:e,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100}],series:[{name:"Kçº¿",type:"candlestick",data:t,itemStyle:{color:"#ef232a",color0:"#14b143",borderColor:"#ef232a",borderColor0:"#14b143"}},{name:"MA5",type:"line",data:l,smooth:!0,lineStyle:{color:"#4ECDC4",width:1},itemStyle:{color:"#4ECDC4"},symbol:"none"},{name:"MA10",type:"line",data:n,smooth:!0,lineStyle:{color:"#ffbf00",width:1},itemStyle:{color:"#ffbf00"},symbol:"none"},{name:"MA20",type:"line",data:s,smooth:!0,lineStyle:{color:"#f92672",width:1},itemStyle:{color:"#f92672"},symbol:"none"},{name:"æˆäº¤é‡",type:"bar",xAxisIndex:1,yAxisIndex:1,data:a.map((e,a)=>{const l=t[a],n=l&&l[1]>=l[0];return{value:e,itemStyle:{color:n?"#ef232a":"#14b143"}}})}]}}),q=async(t=null)=>{try{a.value=!0;const n=t||l.value,r=await Ke.Ay.getSectorData(n,{include_sectors:s.value,include_concepts:o.value});let i=null;if(r.data&&r.data.data&&Array.isArray(r.data.data)?i=r.data.data:r.data&&Array.isArray(r.data)&&(i=r.data),i&&i.length>0){const t=i.length,a=i.filter(e=>null!==e.æ¶¨è·Œå¹…&&parseFloat(e.æ¶¨è·Œå¹…||0)>0).length,l=i.filter(e=>null!==e.æ¶¨è·Œå¹…&&parseFloat(e.æ¶¨è·Œå¹…||0)<0).length,n=t-a-l;e.value={top_sectors:i,summary:{total_sectors:t,up_sectors:a,down_sectors:l,flat_sectors:n}},console.log("æ¿å—æ•°æ®åŠ è½½æˆåŠŸ:",i.length,"æ¡è®°å½•"),console.log("ç»Ÿè®¡ä¿¡æ¯:",e.value.summary)}else e.value={top_sectors:[],summary:{}},console.warn("æ¿å—æ•°æ®æ ¼å¼å¼‚å¸¸:",r.data),Ne.nk.error("æ¿å—æ•°æ®åŠ è½½å¤±è´¥")}catch(n){console.error("è·å–æ¿å—æ•°æ®å¤±è´¥:",n),Ne.nk.error("è·å–æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{a.value=!1}},Q=e=>{e&&J()},Z=()=>{if(!s.value&&!o.value)return Ne.nk.warning("è‡³å°‘è¦é€‰æ‹©ä¸€ç§æ¿å—ç±»å‹"),s.value||(s.value=!0),void(o.value||(o.value=!0));J()},J=async()=>{await q(),m.value&&await ue()},ee=()=>{if(u.value&&p.value){const e=new Date(u.value),t=new Date(p.value);if(e>=t)return void Ne.nk.warning("å¼€å§‹æ—¥æœŸå¿…é¡»æ—©äºç»“æŸæ—¥æœŸ");const a=(t-e)/864e5;if(a>365)return void Ne.nk.warning("è‡ªå®šä¹‰åŒºé—´ä¸èƒ½è¶…è¿‡1å¹´")}},te=async()=>{if(u.value&&p.value)try{a.value=!0;const t=await Ke.Ay.getSectorCustomPeriod({start_date:u.value,end_date:p.value,include_sectors:s.value,include_concepts:o.value});if(t.success){const a=t.data,l=B.value.map(e=>{const t=a.find(t=>t.æ¿å—åç§°===e.æ¿å—åç§°);return{...e,"è‡ªå®šä¹‰æ¶¨è·Œå¹…":t?t.åŒºé—´æ¶¨è·Œå¹…:null}});e.value={...e.value,top_sectors:l},h.value=!0,Ne.nk.success(`å·²è®¡ç®— ${u.value} è‡³ ${p.value} çš„åŒºé—´æ¶¨è·Œå¹…`)}else Ne.nk.error("è®¡ç®—è‡ªå®šä¹‰åŒºé—´æ¶¨è·Œå¹…å¤±è´¥")}catch(t){console.error("è®¡ç®—è‡ªå®šä¹‰åŒºé—´æ¶¨è·Œå¹…å¤±è´¥:",t),Ne.nk.error("è®¡ç®—å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{a.value=!1}else Ne.nk.warning("è¯·é€‰æ‹©å¼€å§‹å’Œç»“æŸæ—¥æœŸ")},ae=()=>{H.value&&(c.value.push({start_date:i.value.startDate,end_date:i.value.endDate,name:i.value.name.trim()}),i.value={startDate:"",endDate:"",name:""},Ne.nk.success(`å·²æ·»åŠ æ—¶é—´åŒºé—´: ${i.value.name}`))},le=e=>{const t=c.value.splice(e,1)[0];Ne.nk.info(`å·²ç§»é™¤æ—¶é—´åŒºé—´: ${t.name}`)},ne=()=>{const e=[],t=new Date;return r.value.forEach(a=>{let l,n,s,o;switch(a){case"5d":l=new Date(t.getTime()-432e6),n=t,s="5æ—¥æ¶¨è·Œå¹…",o="5æ—¥æ¶¨è·Œå¹…";break;case"10d":l=new Date(t.getTime()-864e6),n=t,s="10æ—¥æ¶¨è·Œå¹…",o="10æ—¥æ¶¨è·Œå¹…";break;case"30d":l=new Date(t.getTime()-2592e6),n=t,s="30æ—¥æ¶¨è·Œå¹…",o="30æ—¥æ¶¨è·Œå¹…";break;case"90d":l=new Date(t.getTime()-7776e6),n=t,s="90æ—¥æ¶¨è·Œå¹…",o="90æ—¥æ¶¨è·Œå¹…";break}l&&n&&e.push({start_date:l.toISOString().split("T")[0],end_date:n.toISOString().split("T")[0],name:s,key:o})}),c.value.forEach(t=>{e.push({start_date:t.start_date,end_date:t.end_date,name:t.name,key:`åŒºé—´_${t.name}`})}),e},se=e=>e?Ke.Wp.formatNumber(e):"0",oe=e=>e?Ke.Wp.formatPercent(e):"0.00%",re=e=>{if(!e)return"0";const t=parseFloat(e);return t>=1e8?(t/1e8).toFixed(2)+"äº¿":t>=1e4?(t/1e4).toFixed(2)+"ä¸‡":t.toFixed(2)},ie=e=>{if(!e)return"0";const t=parseFloat(e);return t>=1e8?(t/1e8).toFixed(2)+"äº¿":t>=1e7?(t/1e7).toFixed(2)+"åƒä¸‡":t>=1e4?(t/1e4).toFixed(2)+"ä¸‡":t.toFixed(2)},ce=e=>{if(!e)return"0";const t=parseFloat(e);return t>=1e8?(t/1e8).toFixed(2)+"äº¿":t>=1e4?(t/1e4).toFixed(2)+"ä¸‡":t.toFixed(0)},de=e=>{if(!e&&0!==e)return"--";const t=parseFloat(e);return isNaN(t)?"--":t.toFixed(2)+"å€"},ue=async()=>{if(v.value)try{_.value=!0;const e={days_range:30,format:"data",date:l.value};console.log("ğŸ”§ è¯·æ±‚æ¿å—Kçº¿æ•°æ®:",v.value.æ¿å—åç§°,e);const t=await Ke.Ay.getSingleSectorKline(v.value.æ¿å—åç§°,e);t&&t.success&&t.data.kline_data?(k.value=t.data.kline_data,console.log("âœ… æ¿å—Kçº¿æ•°æ®åŠ è½½æˆåŠŸ:",k.value.length,"æ¡è®°å½•"),m.value=""):(Ne.nk.error("è·å–æ¿å—Kçº¿æ•°æ®å¤±è´¥: "+(t.error||"æœªçŸ¥é”™è¯¯")),k.value=[])}catch(e){console.error("è·å–æ¿å—Kçº¿æ•°æ®å¤±è´¥:",e),Ne.nk.error("è·å–æ¿å—Kçº¿æ•°æ®å¤±è´¥: "+e.message),k.value=[]}finally{_.value=!1}else Ne.nk.warning("è¯·å…ˆé€‰æ‹©æ¿å—")},pe=(e,t,a)=>{const l=parseFloat(e[a])||0,n=parseFloat(t[a])||0;return l-n},he=()=>{V&&clearTimeout(V),V=setTimeout(()=>{D.value.trim()?ge():L.value=[]},300)},ge=async()=>{try{const e=await Ke.Ay.searchStocks(D.value.trim());e.success?L.value=e.data||[]:(Ne.nk.error("æœç´¢è‚¡ç¥¨å¤±è´¥: "+e.error),L.value=[])}catch(e){console.error("æœç´¢è‚¡ç¥¨å¤±è´¥:",e),Ne.nk.error("æœç´¢è‚¡ç¥¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),L.value=[]}},me=e=>x.value.some(t=>t.ä»£ç ===e),ke=e=>{x.value.length>=30?Ne.nk.warning("æœ€å¤šåªèƒ½é€‰æ‹©30åªè‚¡ç¥¨è¿›è¡Œå¯¹æ¯”"):me(e.ä»£ç )?Ne.nk.info("è¯¥è‚¡ç¥¨å·²ç»æ·»åŠ è¿‡äº†"):(x.value.push(e),Ne.nk.success(`å·²æ·»åŠ  ${e.åç§°}(${e.ä»£ç })`),D.value="",L.value=[])},_e=e=>{const t=x.value.findIndex(t=>t.ä»£ç ===e);if(t>-1){const e=x.value.splice(t,1)[0];Ne.nk.info(`å·²ç§»é™¤ ${e.åç§°}(${e.ä»£ç })`),S.value&&(S.value="")}},ve=()=>{x.value.length>0&&(x.value=[],S.value="",Ne.nk.info("å·²æ¸…ç©ºæ‰€æœ‰é€‰æ‹©çš„è‚¡ç¥¨"))},be=async()=>{if(0!==x.value.length)if(U.value)try{E.value=!0;const e=x.value.map(e=>e.ä»£ç ),t={stock_codes:e,normalize:M.value};"preset"===K.value?t.days_back=A.value:(t.start_date=T.value,t.end_date=I.value);const a=await Ke.Ay.getStockComparison(t);if(a.success){S.value=a.data.chart_html;const e="preset"===K.value?`æœ€è¿‘${A.value}å¤©`:`${T.value} è‡³ ${I.value}`;Ne.nk.success(`å·²ç”Ÿæˆ ${a.data.stock_count} åªè‚¡ç¥¨çš„å¯¹æ¯”å›¾ (${e})`)}else Ne.nk.error("ç”Ÿæˆå¯¹æ¯”å›¾å¤±è´¥: "+a.error)}catch(e){console.error("ç”Ÿæˆè‚¡ç¥¨å¯¹æ¯”å›¾å¤±è´¥:",e),Ne.nk.error("ç”Ÿæˆå¯¹æ¯”å›¾å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{E.value=!1}else Ne.nk.warning("è¯·é€‰æ‹©æœ‰æ•ˆçš„æ—¶é—´èŒƒå›´");else Ne.nk.warning("è¯·å…ˆæ·»åŠ è‚¡ç¥¨")},fe=async e=>{v.value=e,b.value=null,C.value="",w.value=[],console.log(`ğŸ”„ å¼€å§‹åŠ è½½æ¿å—: ${e.æ¿å—åç§°}`);const t=performance.now();try{await Promise.all([Ce(),ue()]);const a=performance.now();console.log(`âœ… æ¿å— ${e.æ¿å—åç§°} åŠ è½½å®Œæˆï¼Œè€—æ—¶: ${(a-t).toFixed(2)}ms`)}catch(a){console.error(`âŒ æ¿å— ${e.æ¿å—åç§°} åŠ è½½å¤±è´¥:`,a),Ne.nk.error("æ¿å—åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•")}},ye=async e=>{b.value=e,await we()},Ce=async()=>{if(v.value)try{y.value=!0;const e={};l.value&&(e.date=l.value),console.log("ğŸ”§ è¯·æ±‚æ¿å—æˆåˆ†è‚¡æ•°æ®:",v.value.æ¿å—åç§°,e);const t=await Ke.Ay.getSectorStocks(v.value.æ¿å—åç§°,e);t.success?(f.value=t.data,console.log("âœ… æ¿å—æˆåˆ†è‚¡æ•°æ®åŠ è½½æˆåŠŸ:",f.value.length,"æ¡è®°å½•")):Ne.nk.error("åŠ è½½æˆåˆ†è‚¡å¤±è´¥: "+t.error)}catch(e){Ne.nk.error("åŠ è½½æˆåˆ†è‚¡å¤±è´¥: "+e.message)}finally{y.value=!1}},we=async()=>{if(b.value){F.value=!0;try{console.log("ğŸ”„ åŠ è½½ä¸ªè‚¡Kçº¿æ•°æ®:",b.value.åç§°,b.value.ä»£ç );const e=b.value.ä»£ç ||b.value.code||b.value;console.log("ğŸ“Š è‚¡ç¥¨ä»£ç :",e,"è‚¡ç¥¨å¯¹è±¡:",b.value);const t=await Ke.Ay.getStockKline(e,30,l.value,"data");t.success&&t.data.data&&t.data.data.kline_data?(w.value=t.data.data.kline_data,console.log("âœ… ä¸ªè‚¡Kçº¿æ•°æ®åŠ è½½æˆåŠŸ:",w.value.length,"æ¡è®°å½•"),C.value=""):(Ne.nk.error("åŠ è½½ä¸ªè‚¡Kçº¿æ•°æ®å¤±è´¥: "+(t.error||t.message)),w.value=[])}catch(e){Ne.nk.error("åŠ è½½ä¸ªè‚¡Kçº¿æ•°æ®å¤±è´¥: "+e.message),w.value=[]}finally{F.value=!1}}},Fe=({row:e})=>v.value&&v.value.æ¿å—åç§°===e.æ¿å—åç§°?"selected-row":"",De=({row:e})=>b.value&&b.value.ä»£ç ===e.ä»£ç ?"selected-row":"",Le=async()=>{try{W.value=!0;const e=await fetch("/api/stock-groups"),t=await e.json();t.success?P.value=t.data:Ne.nk.error("åŠ è½½è‚¡ç¥¨ç»„åˆå¤±è´¥: "+t.error)}catch(e){Ne.nk.error("åŠ è½½è‚¡ç¥¨ç»„åˆå¤±è´¥: "+e.message)}finally{W.value=!1}},xe=async()=>{if(O.value.name.trim())try{R.value=!0;const e=x.value.map(e=>e.ä»£ç ),t=await fetch("/api/stock-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O.value.name.trim(),description:O.value.description.trim(),stock_codes:e})}),a=await t.json();a.success?(Ne.nk.success(a.message),$.value=!1,O.value={name:"",description:""},await Le()):Ne.nk.error("ä¿å­˜å¤±è´¥: "+a.error)}catch(e){Ne.nk.error("ä¿å­˜å¤±è´¥: "+e.message)}finally{R.value=!1}else Ne.nk.warning("è¯·è¾“å…¥ç»„åˆåç§°")},Se=async e=>{try{x.value=[],S.value="";for(const a of e.stock_codes)try{const e=await Ke.Ay.searchStocks(a);if(e.success&&e.data.length>0){const t=e.data.find(e=>e.ä»£ç ===a);t&&!x.value.some(e=>e.ä»£ç ===t.ä»£ç )&&x.value.push(t)}}catch(t){console.warn(`æ— æ³•åŠ è½½è‚¡ç¥¨ ${a}:`,t)}Ne.nk.success(`å·²åŠ è½½ç»„åˆ "${e.name}"ï¼ŒæˆåŠŸæ·»åŠ  ${x.value.length} åªè‚¡ç¥¨`),Y.value=!1}catch(t){Ne.nk.error("åŠ è½½ç»„åˆå¤±è´¥: "+t.message)}},Ee=async e=>{try{await il.s.confirm(`ç¡®å®šè¦åˆ é™¤è‚¡ç¥¨ç»„åˆ "${e.name}" å—ï¼Ÿ`,"ç¡®è®¤åˆ é™¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const t=await fetch(`/api/stock-groups/${e.id}`,{method:"DELETE"}),a=await t.json();a.success?(Ne.nk.success(a.message),await Le()):Ne.nk.error("åˆ é™¤å¤±è´¥: "+a.error)}catch(t){"cancel"!==t&&Ne.nk.error("åˆ é™¤å¤±è´¥: "+t.message)}},Me=e=>new Date(e).toLocaleDateString("zh-CN");return(0,n.wB)(Y,e=>{e&&Le()}),(0,n.sV)(()=>{q()}),{sectorData:e,charts:t,loading:a,globalDate:l,includeSectors:s,includeConcepts:o,selectedQuickIntervals:r,customInterval:i,customIntervals:c,canAddCustomInterval:H,allIntervals:N,addCustomInterval:ae,removeCustomInterval:le,generateIntervals:ne,showCustomPeriod:h,summary:X,topSectors:B,selectedIndex:g,sectorKlineChart:m,sectorKlineData:k,sectorKlineOption:z,klineLoading:_,selectedSector:v,selectedStock:b,sectorStocks:f,stocksLoading:y,stockKlineChart:C,stockKlineData:w,stockKlineOption:G,stockKlineLoading:F,chartTitle:j,selectSector:fe,selectStock:ye,loadSectorStocks:Ce,loadStockKline:we,getSectorRowClass:Fe,getStockRowClass:De,stockSearchQuery:D,stockSearchResults:L,selectedStocks:x,stockComparisonChart:S,comparisonLoading:E,normalizeComparison:M,comparisonDays:A,timeRangeType:K,customStartDate:T,customEndDate:I,isTimeRangeValid:U,onStockSearch:he,searchStocks:ge,isStockSelected:me,addStock:ke,removeStock:_e,clearAllStocks:ve,generateStockComparison:be,showSaveGroupDialog:$,showLoadGroupDialog:Y,savingGroup:R,loadingGroups:W,stockGroups:P,saveGroupForm:O,saveStockGroup:xe,loadStockGroup:Se,deleteStockGroup:Ee,formatDate:Me,loadData:q,loadAllData:J,onGlobalDateChange:Q,onFilterChange:Z,onCustomPeriodChange:ee,calculateCustomPeriod:te,loadSectorKline:ue,formatNumber:se,formatPercent:oe,formatMarketCap:re,formatAmount:ie,formatVolume:ce,formatVolumeRatio:de,sortByNumber:pe}}};const vl=(0,h.A)(_l,[["render",rl],["__scopeId","data-v-fbdcb7b0"]]);var bl=vl;const fl={class:"index-analysis"},yl={class:"control-panel"},Cl={class:"slider-label"},wl={class:"sentiment-analysis"},Fl={key:0},Dl=["innerHTML"],Ll={key:1,class:"no-data"},xl={key:0},Sl=["innerHTML"],El={key:1,class:"no-data"},Ml={class:"strategy-content"},Al={class:"strategy-emoji"},Kl={class:"strategy-description"},Tl={class:"index-selection"},Il={class:"card-header"},Vl={class:"index-selector"},$l={key:0,class:"unavailable-tag"},Yl={class:"kline-chart"},Rl={class:"card-header"},Wl={class:"selected-count"},Pl={key:0,class:"multiple-charts-container"},Ol={key:1,class:"chart-container"},Xl={key:2,class:"chart-container"},Bl=["innerHTML"],Hl={key:3,class:"no-chart"};function Nl(e,t,a,l,s,o){const r=(0,n.g2)("trading-date-picker"),i=(0,n.g2)("el-col"),c=(0,n.g2)("el-slider"),d=(0,n.g2)("el-button"),u=(0,n.g2)("el-row"),p=(0,n.g2)("el-card"),h=(0,n.g2)("el-checkbox"),g=(0,n.g2)("el-checkbox-group"),m=(0,n.g2)("v-chart"),_=(0,n.g2)("el-empty"),v=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",fl,[t[10]||(t[10]=(0,n.Lk)("div",{class:"page-header"},[(0,n.Lk)("h1",null,"ğŸ“ˆ æŒ‡æ•°åˆ†æ")],-1)),(0,n.Lk)("div",yl,[(0,n.bF)(u,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(r,{modelValue:s.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedDate=e),placeholder:"é€‰æ‹©åˆ†ææ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYYMMDD",onChange:o.loadAnalysisData},null,8,["modelValue","onChange"])]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(c,{modelValue:s.daysRange,"onUpdate:modelValue":t[1]||(t[1]=e=>s.daysRange=e),min:30,max:365,step:30,"show-input":"",onChange:o.loadKlineData},null,8,["modelValue","onChange"]),(0,n.Lk)("span",Cl,"å¤©æ•°èŒƒå›´: "+(0,k.v_)(s.daysRange)+"å¤©",1)]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(d,{type:"primary",onClick:o.refreshData,loading:s.loading},{default:(0,n.k6)(()=>t[3]||(t[3]=[(0,n.Lk)("i",{class:"el-icon-refresh"},null,-1),(0,n.eW)(" åˆ·æ–°æ•°æ® ")])),_:1,__:[3]},8,["onClick","loading"])]),_:1})]),_:1})]),(0,n.Lk)("div",wl,[(0,n.bF)(u,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(p,{class:"sentiment-card"},{header:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ“Š åŒ—è¯50")],-1)])),default:(0,n.k6)(()=>[null!==s.beijingData.change_pct?((0,n.uX)(),(0,n.CE)("div",Fl,[(0,n.Lk)("div",{class:(0,k.C4)(["metric-value",o.getChangeClass(s.beijingData.change_pct)])},(0,k.v_)(s.beijingData.change_pct?.toFixed(2))+"% ",3),(0,n.Lk)("div",{class:"sentiment-status",innerHTML:s.beijingData.status},null,8,Dl)])):((0,n.uX)(),(0,n.CE)("div",Ll,"âŒ æš‚æ— æ•°æ®"))]),_:1})]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(p,{class:"sentiment-card"},{header:(0,n.k6)(()=>t[5]||(t[5]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ“ˆ å¾®ç›˜è‚¡")],-1)])),default:(0,n.k6)(()=>[null!==s.microcapData.change_pct?((0,n.uX)(),(0,n.CE)("div",xl,[(0,n.Lk)("div",{class:(0,k.C4)(["metric-value",o.getChangeClass(s.microcapData.change_pct)])},(0,k.v_)(s.microcapData.change_pct?.toFixed(2))+"% ",3),(0,n.Lk)("div",{class:"sentiment-status",innerHTML:s.microcapData.status},null,8,Sl)])):((0,n.uX)(),(0,n.CE)("div",El,"âŒ æš‚æ— æ•°æ®"))]),_:1})]),_:1}),(0,n.bF)(i,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(p,{class:"strategy-card"},{header:(0,n.k6)(()=>t[6]||(t[6]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"ğŸ’¡ ç­–ç•¥å»ºè®®")],-1)])),default:(0,n.k6)(()=>[(0,n.Lk)("div",Ml,[(0,n.Lk)("div",Al,(0,k.v_)(s.strategy.emoji),1),(0,n.Lk)("div",{class:(0,k.C4)(["strategy-text",o.getStrategyClass(s.strategy.risk_level)])},(0,k.v_)(s.strategy.strategy),3),(0,n.Lk)("div",Kl,(0,k.v_)(s.strategy.description),1)])]),_:1})]),_:1})]),_:1})]),(0,n.Lk)("div",Tl,[(0,n.bF)(p,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Il,[t[8]||(t[8]=(0,n.Lk)("span",null,"ğŸ“Š æŒ‡æ•°Kçº¿å›¾å¯¹æ¯”",-1)),(0,n.bF)(d,{type:"text",onClick:o.loadAvailableIndices,loading:s.loadingIndices},{default:(0,n.k6)(()=>t[7]||(t[7]=[(0,n.eW)(" åˆ·æ–°æŒ‡æ•°åˆ—è¡¨ ")])),_:1,__:[7]},8,["onClick","loading"])])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",Vl,[(0,n.bF)(g,{modelValue:s.selectedIndices,"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedIndices=e),onChange:o.loadKlineData},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.availableIndices,e=>((0,n.uX)(),(0,n.Wv)(h,{key:e.code,label:e.name,disabled:!e.available},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(e.name)+" ",1),e.available?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",$l,"(æš‚æ— æ•°æ®)"))]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue","onChange"])])]),_:1})]),(0,n.Lk)("div",Yl,[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,null,{header:(0,n.k6)(()=>[(0,n.Lk)("div",Rl,[t[9]||(t[9]=(0,n.Lk)("span",null,"ğŸ“ˆ å¤šæŒ‡æ•°Kçº¿å›¾å¯¹æ¯”",-1)),(0,n.Lk)("span",Wl,"å·²é€‰æ‹© "+(0,k.v_)(s.selectedIndices.length)+" ä¸ªæŒ‡æ•°",1)])]),default:(0,n.k6)(()=>[s.chartOptions&&"multiple"===s.chartOptions.type?((0,n.uX)(),(0,n.CE)("div",Pl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.chartOptions.charts,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.name,class:"single-chart-container"},[(0,n.bF)(m,{ref_for:!0,ref:`chart-${e.name}`,option:e.option,style:{height:"500px",width:"100%",marginBottom:"20px"},autoresize:""},null,8,["option"])]))),128))])):s.chartOptions&&Object.keys(s.chartOptions).length>0?((0,n.uX)(),(0,n.CE)("div",Ol,[(0,n.bF)(m,{ref:"klineChart",option:s.chartOptions,style:{height:"600px",width:"100%"},autoresize:""},null,8,["option"])])):s.klineHtml?((0,n.uX)(),(0,n.CE)("div",Xl,[(0,n.Lk)("div",{ref:"chartContainer",innerHTML:s.klineHtml},null,8,Bl)])):s.loadingKline?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Hl,[(0,n.bF)(_,{description:"è¯·é€‰æ‹©æŒ‡æ•°ä»¥æ˜¾ç¤ºKçº¿å›¾"})]))]),_:1})),[[v,s.loadingKline]])])])}(0,Ce.Y)([we.a,Fe.a,De.a,sa.a,Le.a,xe.a,Se.a,Ee.a,Me.a,oa.a]);var Ul={name:"IndexAnalysis",components:{VChart:Ae.Ay,TradingDatePicker:Te.A},data(){return{loading:!1,loadingKline:!1,loadingIndices:!1,selectedDate:(new Date).toISOString().slice(0,10),daysRange:180,beijingData:{change_pct:null,status:"åŠ è½½ä¸­..."},microcapData:{change_pct:null,status:"åŠ è½½ä¸­..."},strategy:{strategy:"åŠ è½½ä¸­...",emoji:"â³",risk_level:"unknown",description:"æ­£åœ¨åˆ†æå¸‚åœºæ•°æ®..."},availableIndices:[],selectedIndices:["ä¸Šè¯æŒ‡æ•°","ä¸­è¯2000","åˆ›ä¸šæ¿æŒ‡"],klineHtml:"",chartOptions:null}},computed:{formattedDate(){return this.selectedDate?this.selectedDate.replace(/-/g,""):""}},mounted(){this.initData()},methods:{async initData(){await this.loadAvailableIndices(),await this.loadAnalysisData(),await this.loadKlineData()},async loadAnalysisData(){this.loading=!0;try{const e=await na.A.get("/api/indices/analysis",{params:{date:this.formattedDate}});if(e.data.success){const t=e.data.data;this.beijingData=t.beijing_data.beijing_50,this.microcapData=t.beijing_data.microcap,this.strategy=t.strategy}}catch(e){console.error("åŠ è½½åˆ†ææ•°æ®å¤±è´¥:",e),this.$message.error("åŠ è½½åˆ†ææ•°æ®å¤±è´¥")}finally{this.loading=!1}},async loadAvailableIndices(){this.loadingIndices=!0;try{const e=await na.A.get("/api/indices/available");e.data.success&&(this.availableIndices=e.data.data.available_indices)}catch(e){console.error("åŠ è½½æŒ‡æ•°åˆ—è¡¨å¤±è´¥:",e),this.$message.error("åŠ è½½æŒ‡æ•°åˆ—è¡¨å¤±è´¥")}finally{this.loadingIndices=!1}},async loadKlineData(){if(0!==this.selectedIndices.length){this.loadingKline=!0;try{console.log("ğŸ”„ å¼€å§‹åŠ è½½Kçº¿æ•°æ®...",{date:this.formattedDate,days_range:this.daysRange,indices:this.selectedIndices});const e=await na.A.post("/api/indices/kline",{indices:this.selectedIndices,date:this.formattedDate,days_range:this.daysRange,format:"chart"});if(console.log("ğŸ“Š Kçº¿æ•°æ®å“åº”:",e.data),e.data.success){const t=e.data.data?.kline_data||{},a=t.chart_html,l=t.chart_options;console.log("ğŸ“ˆ Kçº¿å›¾HTMLé•¿åº¦:",a?a.length:0),console.log("ğŸ“Š å›¾è¡¨é…ç½®:",l?"å·²è·å–":"æœªè·å–"),l?(this.chartOptions=this.processChartOptions(l),this.klineHtml="",console.log("âœ… ä½¿ç”¨EChartsé…ç½®æ¸²æŸ“å›¾è¡¨")):a&&a.length>0?(this.klineHtml=a,this.chartOptions=null,console.log("âœ… ä½¿ç”¨HTMLæ¸²æŸ“å›¾è¡¨"),this.$nextTick(()=>{console.log("ğŸ”„ Vue nextTick å®Œæˆï¼ŒDOMåº”è¯¥å·²æ›´æ–°"),this.executeChartScripts()})):console.warn("âš ï¸ æ²¡æœ‰å¯ç”¨çš„å›¾è¡¨æ•°æ®")}else console.error("âŒ Kçº¿æ•°æ®åŠ è½½å¤±è´¥:",e.data)}catch(e){console.error("âŒ åŠ è½½Kçº¿æ•°æ®å¤±è´¥:",e),this.$message.error("åŠ è½½Kçº¿æ•°æ®å¤±è´¥")}finally{this.loadingKline=!1}}else this.klineHtml=""},async refreshData(){await this.initData(),this.$message.success("æ•°æ®åˆ·æ–°å®Œæˆ")},processChartOptions(e){const t=e=>{if(Array.isArray(e))return e.map(e=>t(e));if(e&&"object"===typeof e){const l={};for(const[n,s]of Object.entries(e))if("__js_function__"===n&&"string"===typeof s)try{l[n.replace("__js_function__","")]=new Function("return "+s)(),delete l["__js_function__"]}catch(a){console.error("å¤„ç†JavaScriptå‡½æ•°å¤±è´¥:",a),l[n]=s}else if("object"===typeof s&&null!==s&&s.__js_function__)try{l[n]=new Function("return "+s.__js_function__)()}catch(a){console.error("å¤„ç†JavaScriptå‡½æ•°å¤±è´¥:",a),l[n]=t(s)}else l[n]=t(s);return l}return e};console.log("ğŸ”§ å¤„ç†å›¾è¡¨é…ç½®ä¸­çš„JavaScriptå‡½æ•°...");const a=t(e);return console.log("âœ… JavaScriptå‡½æ•°å¤„ç†å®Œæˆ"),a},executeChartScripts(){this.$nextTick(()=>{const e=this.$refs.chartContainer;if(e){const t=e.querySelectorAll("script");t.forEach(e=>{try{const t=document.createElement("script");t.textContent=e.textContent,document.head.appendChild(t),document.head.removeChild(t),console.log("ğŸ“Š æ‰§è¡Œäº†å›¾è¡¨è„šæœ¬")}catch(t){console.error("âŒ æ‰§è¡Œå›¾è¡¨è„šæœ¬å¤±è´¥:",t)}})}})},getChangeClass(e){return e>0?"positive":e<0?"negative":"neutral"},getStrategyClass(e){const t={"æ¿€è¿›":"strategy-aggressive","ç§¯æ":"strategy-positive","ä¸­æ€§":"strategy-neutral","è°¨æ…":"strategy-cautious","ä¿å®ˆ":"strategy-conservative","è§‚æœ›":"strategy-wait"};return t[e]||"strategy-neutral"}}};const jl=(0,h.A)(Ul,[["render",Nl],["__scopeId","data-v-8c3f1d08"]]);var zl=jl;const Gl=[{path:"/",redirect:"/index-analysis"},{path:"/sentiment",name:"MarketSentiment",component:te,meta:{title:"å¸‚åœºæƒ…ç»ª",icon:"Odometer"}},{path:"/sectors",name:"SectorAnalysis",component:bl,meta:{title:"æ¿å—åˆ†æ",icon:"Grid"}},{path:"/strong-stocks",redirect:"/strong-stocks/new-high",meta:{title:"å¼ºåŠ¿è‚¡åˆ†æ",icon:"TrendCharts",isParent:!0}},{path:"/strong-stocks/new-high",name:"NewHighStocks",component:$e,meta:{title:"æ–°é«˜è‚¡ç¥¨",icon:"TrendCharts",parent:"strong-stocks"}},{path:"/strong-stocks/heima",name:"HeimaAnalysis",component:ze,meta:{title:"é»‘é©¬åˆ†æ",icon:"Lightning",parent:"strong-stocks"}},{path:"/strong-stocks/baima",name:"BaimaAnalysis",component:ut,meta:{title:"ç™½é©¬åˆ†æ",icon:"Star",parent:"strong-stocks"}},{path:"/strong-stocks/money-effect",name:"MoneyEffect",component:ca,meta:{title:"èµšäºé’±æ•ˆåº”",icon:"Money",parent:"strong-stocks"}},{path:"/index-analysis",name:"IndexAnalysis",component:zl,meta:{title:"æŒ‡æ•°åˆ†æ",icon:"TrendCharts"}}],ql=(0,u.aE)({history:(0,u.LA)(),routes:Gl});ql.beforeEach((e,t,a)=>{e.meta.title&&(document.title=`${e.meta.title} - è‚¡ç¥¨åˆ†æç³»ç»Ÿ`),console.log(`ğŸ”„ è·¯ç”±åˆ‡æ¢: ${t.path} â†’ ${e.path}`),a()});var Ql=ql,Zl=a(2765),Jl=(a(4188),a(6558));window.echarts=Jl;const en=(e,t)=>{let a;return(...l)=>{clearTimeout(a),a=setTimeout(()=>e.apply(null,l),t)}},tn=window.ResizeObserver;window.ResizeObserver=class extends tn{constructor(e){e=en(e,20),super(e)}},window.addEventListener("error",e=>{if("ResizeObserver loop completed with undelivered notifications."===e.message){const e=document.getElementById("webpack-dev-server-client-overlay-div"),t=document.getElementById("webpack-dev-server-client-overlay");t&&t.setAttribute("style","display: none"),e&&e.setAttribute("style","display: none")}});const an=(0,l.Ef)(m);for(const[ln,nn]of Object.entries(it))an.component(ln,nn);an.use(Ql),an.use(Zl.A),an.mount("#app"),console.log("ğŸš€ è‚¡ç¥¨åˆ†æç³»ç»Ÿå‰ç«¯å¯åŠ¨æˆåŠŸ"),console.log("ğŸ“Š Vue.js + Element Plus + ECharts")},9838:function(e,t,a){a.d(t,{A:function(){return h}});var l=a(641);const n={class:"trading-date-picker-wrapper"},s={class:"date-navigation"};function o(e,t,a,o,r,i){const c=(0,l.g2)("ArrowLeft"),d=(0,l.g2)("el-icon"),u=(0,l.g2)("el-button"),p=(0,l.g2)("el-date-picker"),h=(0,l.g2)("ArrowRight");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",s,[(0,l.bF)(u,{type:"text",class:"nav-button prev-button",onClick:o.goToPrevTradingDay,disabled:o.loading,title:"ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥"},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(c)]),_:1})]),_:1},8,["onClick","disabled"]),(0,l.bF)(p,(0,l.v6)({modelValue:o.internalValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.internalValue=e)},e.$attrs,{"disabled-date":o.disabledDateHandler,"cell-class-name":o.cellClassNameHandler,onChange:o.handleChange,onVisibleChange:o.handleVisibleChange,onPanelChange:o.handlePanelChange,class:"date-picker-input"}),null,16,["modelValue","disabled-date","cell-class-name","onChange","onVisibleChange","onPanelChange"]),(0,l.bF)(u,{type:"text",class:"nav-button next-button",onClick:o.goToNextTradingDay,disabled:o.loading,title:"ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥"},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(h)]),_:1})]),_:1},8,["onClick","disabled"])])])}var r=a(953),i=a(8548),c=a(2889),d={name:"TradingDatePicker",components:{ArrowLeft:i.ArrowLeft,ArrowRight:i.ArrowRight},props:{modelValue:{type:[String,Date,null],default:null},enableHolidayMarking:{type:Boolean,default:!0},disableNonTradingDays:{type:Boolean,default:!0},disableFutureDates:{type:Boolean,default:!0},customDisabledDate:{type:Function,default:null},valueFormat:{type:String,default:"YYYY-MM-DD"}},emits:["update:modelValue","change"],setup(e,{emit:t,attrs:a}){const n=e=>{const t=new Date(e);return t.setHours(12,0,0,0),t},s=e=>{const t=n(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${l}-${s}`},o=()=>a["value-format"]||e.valueFormat||"YYYY-MM-DD",i=(0,r.KR)(e.modelValue),d=(0,r.KR)(new Map),u=(0,r.KR)(!1),p=(0,r.KR)((new Date).getFullYear()),h=(0,r.KR)((new Date).getMonth()+1);(0,l.wB)(()=>e.modelValue,e=>{i.value=e}),(0,l.wB)(i,e=>{t("update:modelValue",e)});const g=async(e,t)=>{const a=`${e}-${t}`;if(d.value.has(a))return d.value.get(a);try{u.value=!0;const l=await c.Ay.getNonTradingDays(e,t);if(l&&l.success&&l.data?.non_trading_days){const e=l.data.non_trading_days.map(e=>({date:e.date,type:e.type||"",reason:e.reason||"",description:e.description||""}));return d.value.set(a,e),e}return[]}catch(l){return console.error(`è·å–${e}-${t}éäº¤æ˜“æ—¥å¼‚å¸¸`,l),[]}finally{u.value=!1}},m=e=>{const t=n(e),a=s(t),l=t.getDay(),o=0===l?6:l-1,r=t.getFullYear(),i=t.getMonth()+1,c=1===i?r-1:r,u=1===i?12:i-1,p=12===i?r+1:r,h=12===i?1:i+1,g=[`${c}-${u}`,`${r}-${i}`,`${p}-${h}`];let m=!1;for(const n of g)if(d.value.has(n)&&d.value.get(n).some(e=>e.date===a)){m=!0;break}return!!m||o>=5},k=async e=>{let t=n(e||new Date),a=0;const l=60;while(a<l){if(t.setDate(t.getDate()+1),!m(t))return s(t);a++}return null},_=async e=>{let t=n(e||new Date),a=0;const l=60;while(a<l){if(t.setDate(t.getDate()-1),!m(t))return s(t);a++}return null},v=async()=>{try{u.value=!0;const e=i.value?new Date(i.value):new Date,a=await k(e);if(a){let e=a;"YYYYMMDD"===o()?e=a.replace(/-/g,""):"YYYY-MM-DD"===o()?e=a:"YYYY/MM/DD"===o()&&(e=a.replace(/-/g,"/")),i.value=e,t("change",e),console.log("ğŸ“… è·³è½¬åˆ°ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥:",e)}else console.warn("æœªæ‰¾åˆ°ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥")}catch(e){console.error("è·³è½¬åˆ°ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥å¤±è´¥:",e)}finally{u.value=!1}},b=async()=>{try{u.value=!0;const e=i.value?new Date(i.value):new Date,a=await _(e);if(a){let e=a;"YYYYMMDD"===o()?e=a.replace(/-/g,""):"YYYY-MM-DD"===o()?e=a:"YYYY/MM/DD"===o()&&(e=a.replace(/-/g,"/")),i.value=e,t("change",e),console.log("ğŸ“… è·³è½¬åˆ°ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥:",e)}else console.warn("æœªæ‰¾åˆ°ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥")}catch(e){console.error("è·³è½¬åˆ°ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥å¤±è´¥:",e)}finally{u.value=!1}},f=t=>{const a=new Date;return a.setHours(23,59,59,999),!!(e.disableFutureDates&&t.getTime()>a.getTime())||(!(!e.customDisabledDate||!e.customDisabledDate(t))||!!e.disableNonTradingDays&&m(t))},y=t=>{const a=[];if(!e.enableHolidayMarking)return"";const l=n(t),o=s(l),r=l.getDay(),i=0===r?6:r-1,c=l.getFullYear(),u=l.getMonth()+1,p=1===u?c-1:c,h=1===u?12:u-1,g=12===u?c+1:c,m=12===u?1:u+1,k=[`${p}-${h}`,`${c}-${u}`,`${g}-${m}`];let _=null;for(const e of k)if(d.value.has(e)){const t=d.value.get(e).find(e=>e.date===o);if(t){_=t;break}}return _?"holiday"===_.type||_.reason||_.description?a.push("holiday-cell","non-trading-cell"):a.push("non-trading-cell"):i>=5&&a.push("weekend-cell","non-trading-cell"),a.join(" ")},C=async a=>{if(!a)return void t("change",a);const n=s(a instanceof Date?a:new Date(a));if(e.disableNonTradingDays){const t=m(new Date(n));if(t)return(0,l.dY)(()=>{i.value=e.modelValue}),void console.warn("ä¸èƒ½é€‰æ‹©éäº¤æ˜“æ—¥:",n)}let r=n;"YYYYMMDD"===o()?r=n.replace(/-/g,""):"YYYY-MM-DD"===o()?r=n:"YYYY/MM/DD"===o()&&(r=n.replace(/-/g,"/")),i.value=r,t("change",r)},w=async t=>{if(console.log("æ—¥å†é¢æ¿å¯è§æ€§å˜åŒ–:",t),t&&e.enableHolidayMarking){const e=[];e.push(g(p.value,h.value));let t=p.value,a=h.value-1;a<1&&(a=12,t-=1),e.push(g(t,a));let l=p.value,n=h.value+1;n>12&&(n=1,l+=1),e.push(g(l,n)),await Promise.all(e),console.log("ğŸ“… å·²é¢„åŠ è½½ç›¸é‚»æœˆä»½çš„éäº¤æ˜“æ—¥æ•°æ®")}},F=async(t,a)=>{if(e.enableHolidayMarking&&t&&("month"===a||"year"===a)){const e=t.getFullYear(),a=t.getMonth()+1;p.value=e,h.value=a,await g(e,a)}},D=async()=>{if(e.enableHolidayMarking){console.log("ğŸ“… åˆå§‹åŒ–äº¤æ˜“æ—¥æœŸé€‰æ‹©å™¨ï¼Œå¼€å§‹é¢„åŠ è½½æ•°æ®...");const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,l=[],n=[];for(let o=-6;o<=0;o++){let e=t,l=a+o;while(l<1)l+=12,e-=1;while(l>12)l-=12,e+=1;n.push({year:e,month:l})}for(let o=1;o<=6;o++){let e=t,l=a+o;while(l<1)l+=12,e-=1;while(l>12)l-=12,e+=1;n.push({year:e,month:l})}const s=Array.from(new Set(n.map(e=>`${e.year}-${e.month}`))).map(e=>{const[t,a]=e.split("-").map(Number);return{year:t,month:a}});console.log(`ğŸ“… å‡†å¤‡é¢„åŠ è½½${s.length}ä¸ªæœˆçš„æ•°æ®:`,s);for(const{year:o,month:r}of s)l.push(g(o,r));await Promise.all(l),console.log("ğŸ“… å·²é¢„åŠ è½½å‰ååŠå¹´çš„éäº¤æ˜“æ—¥æ•°æ®")}},L=async()=>{console.log("ğŸ“… æ¸…é™¤å¯èƒ½å­˜åœ¨çš„é”™è¯¯ç¼“å­˜æ•°æ®..."),d.value.clear(),await D(),console.log("ğŸ“… ç»„ä»¶åˆå§‹åŒ–å®Œæˆ")};return L(),{internalValue:i,loading:u,disabledDateHandler:f,cellClassNameHandler:y,handleChange:C,handleVisibleChange:w,handlePanelChange:F,goToNextTradingDay:v,goToPrevTradingDay:b}}},u=a(6262);const p=(0,u.A)(d,[["render",o],["__scopeId","data-v-e90cd49e"]]);var h=p}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,a,l,n){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],n=e[c][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||s>=n)&&Object.keys(__webpack_require__.O).every(function(e){return __webpack_require__.O[e](a[r])})?a.splice(r--,1):(o=!1,n<s&&(s=n));if(o){e.splice(c--,1);var i=l();void 0!==i&&(t=i)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,s=a[0],o=a[1],r=a[2],i=0;if(s.some(function(t){return 0!==e[t]})){for(l in o)__webpack_require__.o(o,l)&&(__webpack_require__.m[l]=o[l]);if(r)var c=r(__webpack_require__)}for(t&&t(a);i<s.length;i++)n=s[i],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(c)},a=self["webpackChunkstock_analysis_frontend"]=self["webpackChunkstock_analysis_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[710,227,504],function(){return __webpack_require__(5318)});__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.d3518f55.js.map